<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>gulp | oliveying</title>
    <meta name="description" content="前端知识，对前端遇到的问题进行总结">
    <link rel="icon" href="/knowledge/img/favicon.ico">
    
    <link rel="preload" href="/knowledge/assets/css/0.styles.ace1f307.css" as="style"><link rel="preload" href="/knowledge/assets/js/app.e8dd3cdf.js" as="script"><link rel="preload" href="/knowledge/assets/js/171.f0323177.js" as="script"><link rel="prefetch" href="/knowledge/assets/js/10.cab2dfd3.js"><link rel="prefetch" href="/knowledge/assets/js/100.3d78fa12.js"><link rel="prefetch" href="/knowledge/assets/js/101.fe41c530.js"><link rel="prefetch" href="/knowledge/assets/js/102.23c67f8f.js"><link rel="prefetch" href="/knowledge/assets/js/103.f5eeda53.js"><link rel="prefetch" href="/knowledge/assets/js/104.2913a654.js"><link rel="prefetch" href="/knowledge/assets/js/105.02b87870.js"><link rel="prefetch" href="/knowledge/assets/js/106.99dac106.js"><link rel="prefetch" href="/knowledge/assets/js/107.ac7dfa30.js"><link rel="prefetch" href="/knowledge/assets/js/108.85c819ee.js"><link rel="prefetch" href="/knowledge/assets/js/109.d05e98f1.js"><link rel="prefetch" href="/knowledge/assets/js/11.624fab4d.js"><link rel="prefetch" href="/knowledge/assets/js/110.88179f43.js"><link rel="prefetch" href="/knowledge/assets/js/111.5f837dee.js"><link rel="prefetch" href="/knowledge/assets/js/112.27304219.js"><link rel="prefetch" href="/knowledge/assets/js/113.e0fe88cd.js"><link rel="prefetch" href="/knowledge/assets/js/114.bc53d601.js"><link rel="prefetch" href="/knowledge/assets/js/115.f744864f.js"><link rel="prefetch" href="/knowledge/assets/js/116.74604a5f.js"><link rel="prefetch" href="/knowledge/assets/js/117.d5822d84.js"><link rel="prefetch" href="/knowledge/assets/js/118.cce5a5cf.js"><link rel="prefetch" href="/knowledge/assets/js/119.94b5ede7.js"><link rel="prefetch" href="/knowledge/assets/js/12.e5ddc2c9.js"><link rel="prefetch" href="/knowledge/assets/js/120.b87b9eae.js"><link rel="prefetch" href="/knowledge/assets/js/121.67f51998.js"><link rel="prefetch" href="/knowledge/assets/js/122.932dfdac.js"><link rel="prefetch" href="/knowledge/assets/js/123.c17c1265.js"><link rel="prefetch" href="/knowledge/assets/js/124.5a7cdfae.js"><link rel="prefetch" href="/knowledge/assets/js/125.08519349.js"><link rel="prefetch" href="/knowledge/assets/js/126.a6c5f21f.js"><link rel="prefetch" href="/knowledge/assets/js/127.7948f123.js"><link rel="prefetch" href="/knowledge/assets/js/128.47604092.js"><link rel="prefetch" href="/knowledge/assets/js/129.fabc7e3b.js"><link rel="prefetch" href="/knowledge/assets/js/13.5bdd4613.js"><link rel="prefetch" href="/knowledge/assets/js/130.2b2ea0f7.js"><link rel="prefetch" href="/knowledge/assets/js/131.fab61ab0.js"><link rel="prefetch" href="/knowledge/assets/js/132.f2426a1c.js"><link rel="prefetch" href="/knowledge/assets/js/133.d5367134.js"><link rel="prefetch" href="/knowledge/assets/js/134.dec57ae1.js"><link rel="prefetch" href="/knowledge/assets/js/135.ac2a6968.js"><link rel="prefetch" href="/knowledge/assets/js/136.172c2abb.js"><link rel="prefetch" href="/knowledge/assets/js/137.4709b575.js"><link rel="prefetch" href="/knowledge/assets/js/138.f67e274c.js"><link rel="prefetch" href="/knowledge/assets/js/139.b799f8ca.js"><link rel="prefetch" href="/knowledge/assets/js/14.6d6f1e72.js"><link rel="prefetch" href="/knowledge/assets/js/140.04fbc1f5.js"><link rel="prefetch" href="/knowledge/assets/js/141.7b8c39ff.js"><link rel="prefetch" href="/knowledge/assets/js/142.8e8e3539.js"><link rel="prefetch" href="/knowledge/assets/js/143.95637b6a.js"><link rel="prefetch" href="/knowledge/assets/js/144.fc9f2380.js"><link rel="prefetch" href="/knowledge/assets/js/145.c8a626a8.js"><link rel="prefetch" href="/knowledge/assets/js/146.3d60801f.js"><link rel="prefetch" href="/knowledge/assets/js/147.b6f1d76c.js"><link rel="prefetch" href="/knowledge/assets/js/148.24dbd259.js"><link rel="prefetch" href="/knowledge/assets/js/149.71c35850.js"><link rel="prefetch" href="/knowledge/assets/js/15.08be0c38.js"><link rel="prefetch" href="/knowledge/assets/js/150.09482b85.js"><link rel="prefetch" href="/knowledge/assets/js/151.c295bfe8.js"><link rel="prefetch" href="/knowledge/assets/js/152.be248ca9.js"><link rel="prefetch" href="/knowledge/assets/js/153.c5bbd5b7.js"><link rel="prefetch" href="/knowledge/assets/js/154.a5d34200.js"><link rel="prefetch" href="/knowledge/assets/js/155.6ba3dd1e.js"><link rel="prefetch" href="/knowledge/assets/js/156.7967fa9a.js"><link rel="prefetch" href="/knowledge/assets/js/157.732ccca0.js"><link rel="prefetch" href="/knowledge/assets/js/158.ef6a3f7d.js"><link rel="prefetch" href="/knowledge/assets/js/159.ab6969e8.js"><link rel="prefetch" href="/knowledge/assets/js/16.9d9f1649.js"><link rel="prefetch" href="/knowledge/assets/js/160.317ac126.js"><link rel="prefetch" href="/knowledge/assets/js/161.cd5a856d.js"><link rel="prefetch" href="/knowledge/assets/js/162.95c7c3fa.js"><link rel="prefetch" href="/knowledge/assets/js/163.c974bfc3.js"><link rel="prefetch" href="/knowledge/assets/js/164.04b25e60.js"><link rel="prefetch" href="/knowledge/assets/js/165.74a0ca3a.js"><link rel="prefetch" href="/knowledge/assets/js/166.59ec0281.js"><link rel="prefetch" href="/knowledge/assets/js/167.5ff16679.js"><link rel="prefetch" href="/knowledge/assets/js/168.8db57035.js"><link rel="prefetch" href="/knowledge/assets/js/169.2cf5e3fa.js"><link rel="prefetch" href="/knowledge/assets/js/17.b6dae52c.js"><link rel="prefetch" href="/knowledge/assets/js/170.fd2c5e83.js"><link rel="prefetch" href="/knowledge/assets/js/172.6a85f157.js"><link rel="prefetch" href="/knowledge/assets/js/173.fff9876e.js"><link rel="prefetch" href="/knowledge/assets/js/174.bb3663a1.js"><link rel="prefetch" href="/knowledge/assets/js/175.d1c7a3b1.js"><link rel="prefetch" href="/knowledge/assets/js/176.3134d73e.js"><link rel="prefetch" href="/knowledge/assets/js/18.812eb236.js"><link rel="prefetch" href="/knowledge/assets/js/19.bab9b15f.js"><link rel="prefetch" href="/knowledge/assets/js/2.b08685c4.js"><link rel="prefetch" href="/knowledge/assets/js/20.acbffa94.js"><link rel="prefetch" href="/knowledge/assets/js/21.c85c8dfd.js"><link rel="prefetch" href="/knowledge/assets/js/22.7586bec6.js"><link rel="prefetch" href="/knowledge/assets/js/23.add99c2f.js"><link rel="prefetch" href="/knowledge/assets/js/24.f37b8bba.js"><link rel="prefetch" href="/knowledge/assets/js/25.5a4990db.js"><link rel="prefetch" href="/knowledge/assets/js/26.c08d72cb.js"><link rel="prefetch" href="/knowledge/assets/js/27.55806bd1.js"><link rel="prefetch" href="/knowledge/assets/js/28.ae1c0c21.js"><link rel="prefetch" href="/knowledge/assets/js/29.801243ae.js"><link rel="prefetch" href="/knowledge/assets/js/3.89aa0963.js"><link rel="prefetch" href="/knowledge/assets/js/30.3f84479d.js"><link rel="prefetch" href="/knowledge/assets/js/31.2686d104.js"><link rel="prefetch" href="/knowledge/assets/js/32.f4ea632e.js"><link rel="prefetch" href="/knowledge/assets/js/33.d3879d82.js"><link rel="prefetch" href="/knowledge/assets/js/34.ed389075.js"><link rel="prefetch" href="/knowledge/assets/js/35.f2a2732a.js"><link rel="prefetch" href="/knowledge/assets/js/36.a1801614.js"><link rel="prefetch" href="/knowledge/assets/js/37.722cf11d.js"><link rel="prefetch" href="/knowledge/assets/js/38.51fd0fe1.js"><link rel="prefetch" href="/knowledge/assets/js/39.e4d78c95.js"><link rel="prefetch" href="/knowledge/assets/js/4.354dd9a6.js"><link rel="prefetch" href="/knowledge/assets/js/40.33abc710.js"><link rel="prefetch" href="/knowledge/assets/js/41.be47b89b.js"><link rel="prefetch" href="/knowledge/assets/js/42.3424b8f6.js"><link rel="prefetch" href="/knowledge/assets/js/43.412ec26c.js"><link rel="prefetch" href="/knowledge/assets/js/44.f041cb67.js"><link rel="prefetch" href="/knowledge/assets/js/45.0f0b3611.js"><link rel="prefetch" href="/knowledge/assets/js/46.5c1a23f5.js"><link rel="prefetch" href="/knowledge/assets/js/47.bdee6fd4.js"><link rel="prefetch" href="/knowledge/assets/js/48.06c1e839.js"><link rel="prefetch" href="/knowledge/assets/js/49.0a196c01.js"><link rel="prefetch" href="/knowledge/assets/js/5.1cf9ccc8.js"><link rel="prefetch" href="/knowledge/assets/js/50.83021277.js"><link rel="prefetch" href="/knowledge/assets/js/51.34dd097f.js"><link rel="prefetch" href="/knowledge/assets/js/52.aafd45f4.js"><link rel="prefetch" href="/knowledge/assets/js/53.11db83c2.js"><link rel="prefetch" href="/knowledge/assets/js/54.b192f9a2.js"><link rel="prefetch" href="/knowledge/assets/js/55.a6201ef7.js"><link rel="prefetch" href="/knowledge/assets/js/56.fdd2a802.js"><link rel="prefetch" href="/knowledge/assets/js/57.c07dfb07.js"><link rel="prefetch" href="/knowledge/assets/js/58.b175e5e6.js"><link rel="prefetch" href="/knowledge/assets/js/59.460554d1.js"><link rel="prefetch" href="/knowledge/assets/js/6.e0dc6229.js"><link rel="prefetch" href="/knowledge/assets/js/60.01075b2a.js"><link rel="prefetch" href="/knowledge/assets/js/61.96e4dd5e.js"><link rel="prefetch" href="/knowledge/assets/js/62.8cbeabd9.js"><link rel="prefetch" href="/knowledge/assets/js/63.514d1e5a.js"><link rel="prefetch" href="/knowledge/assets/js/64.0489a519.js"><link rel="prefetch" href="/knowledge/assets/js/65.52e0551e.js"><link rel="prefetch" href="/knowledge/assets/js/66.bb04ba6a.js"><link rel="prefetch" href="/knowledge/assets/js/67.7df47e57.js"><link rel="prefetch" href="/knowledge/assets/js/68.d4468033.js"><link rel="prefetch" href="/knowledge/assets/js/69.1d5a1bfa.js"><link rel="prefetch" href="/knowledge/assets/js/7.3f2044f5.js"><link rel="prefetch" href="/knowledge/assets/js/70.3560079d.js"><link rel="prefetch" href="/knowledge/assets/js/71.51be2607.js"><link rel="prefetch" href="/knowledge/assets/js/72.f659f825.js"><link rel="prefetch" href="/knowledge/assets/js/73.3a22d685.js"><link rel="prefetch" href="/knowledge/assets/js/74.c314d112.js"><link rel="prefetch" href="/knowledge/assets/js/75.22870c42.js"><link rel="prefetch" href="/knowledge/assets/js/76.62e82f53.js"><link rel="prefetch" href="/knowledge/assets/js/77.2a7db910.js"><link rel="prefetch" href="/knowledge/assets/js/78.d1f5a221.js"><link rel="prefetch" href="/knowledge/assets/js/79.385c5f94.js"><link rel="prefetch" href="/knowledge/assets/js/8.6fc3a323.js"><link rel="prefetch" href="/knowledge/assets/js/80.54244878.js"><link rel="prefetch" href="/knowledge/assets/js/81.1f0189de.js"><link rel="prefetch" href="/knowledge/assets/js/82.0bfe2d2a.js"><link rel="prefetch" href="/knowledge/assets/js/83.0416a2a4.js"><link rel="prefetch" href="/knowledge/assets/js/84.f840385b.js"><link rel="prefetch" href="/knowledge/assets/js/85.69de124b.js"><link rel="prefetch" href="/knowledge/assets/js/86.47c89fa3.js"><link rel="prefetch" href="/knowledge/assets/js/87.b96b0c0d.js"><link rel="prefetch" href="/knowledge/assets/js/88.896e7dda.js"><link rel="prefetch" href="/knowledge/assets/js/89.fe282703.js"><link rel="prefetch" href="/knowledge/assets/js/9.95c8ac01.js"><link rel="prefetch" href="/knowledge/assets/js/90.8c7d7fb3.js"><link rel="prefetch" href="/knowledge/assets/js/91.89276ba9.js"><link rel="prefetch" href="/knowledge/assets/js/92.c1486a90.js"><link rel="prefetch" href="/knowledge/assets/js/93.5bc1d412.js"><link rel="prefetch" href="/knowledge/assets/js/94.c14fcea9.js"><link rel="prefetch" href="/knowledge/assets/js/95.a36950a9.js"><link rel="prefetch" href="/knowledge/assets/js/96.5d2430af.js"><link rel="prefetch" href="/knowledge/assets/js/97.cd3da901.js"><link rel="prefetch" href="/knowledge/assets/js/98.66c81011.js"><link rel="prefetch" href="/knowledge/assets/js/99.c60a9172.js">
    <link rel="stylesheet" href="/knowledge/assets/css/0.styles.ace1f307.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge/" class="home-link router-link-active"><!----> <span class="site-name">oliveying</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">book</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/bgoodparts/" class="nav-link">语言精粹</a></li><li class="dropdown-item"><!----> <a href="/knowledge/http/" class="nav-link">图解http</a></li><li class="dropdown-item"><!----> <a href="/knowledge/es6/" class="nav-link">es6</a></li><li class="dropdown-item"><!----> <a href="/knowledge/javascript/" class="nav-link">javascript教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/knowledge/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/knowledge/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/knowledge/jsHigh/" class="nav-link">javascriptHigh</a></li><li class="dropdown-item"><!----> <a href="/knowledge/h5/" class="nav-link">h5最新用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/knowledge/brower/" class="nav-link">浏览器特性</a></li><li class="dropdown-item"><!----> <a href="/knowledge/d3/" class="nav-link">d3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/summary/" class="nav-link">总结</a></li><li class="dropdown-item"><!----> <a href="/knowledge/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/knowledge/problem/" class="nav-link">problem</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">扩展</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/start/" class="nav-link">启动</a></li><li class="dropdown-item"><!----> <a href="/knowledge/tool/" class="nav-link router-link-active">工具用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/markdown/" class="nav-link">markDown</a></li><li class="dropdown-item"><!----> <a href="/knowledge/linux/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/knowledge/mac/" class="nav-link">mac</a></li><li class="dropdown-item"><!----> <a href="/knowledge/develop/" class="nav-link">提升</a></li><li class="dropdown-item"><!----> <a href="/knowledge/redis/" class="nav-link">redis</a></li></ul></div></div> <a href="https://github.com/oliveying/knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">book</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/bgoodparts/" class="nav-link">语言精粹</a></li><li class="dropdown-item"><!----> <a href="/knowledge/http/" class="nav-link">图解http</a></li><li class="dropdown-item"><!----> <a href="/knowledge/es6/" class="nav-link">es6</a></li><li class="dropdown-item"><!----> <a href="/knowledge/javascript/" class="nav-link">javascript教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/knowledge/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/knowledge/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/knowledge/jsHigh/" class="nav-link">javascriptHigh</a></li><li class="dropdown-item"><!----> <a href="/knowledge/h5/" class="nav-link">h5最新用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/knowledge/brower/" class="nav-link">浏览器特性</a></li><li class="dropdown-item"><!----> <a href="/knowledge/d3/" class="nav-link">d3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/summary/" class="nav-link">总结</a></li><li class="dropdown-item"><!----> <a href="/knowledge/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/knowledge/problem/" class="nav-link">problem</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">扩展</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/start/" class="nav-link">启动</a></li><li class="dropdown-item"><!----> <a href="/knowledge/tool/" class="nav-link router-link-active">工具用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/markdown/" class="nav-link">markDown</a></li><li class="dropdown-item"><!----> <a href="/knowledge/linux/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/knowledge/mac/" class="nav-link">mac</a></li><li class="dropdown-item"><!----> <a href="/knowledge/develop/" class="nav-link">提升</a></li><li class="dropdown-item"><!----> <a href="/knowledge/redis/" class="nav-link">redis</a></li></ul></div></div> <a href="https://github.com/oliveying/knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/knowledge/tool/vscode.html" class="sidebar-link">vscode 问题</a></li><li><a href="/knowledge/tool/git.html" class="sidebar-link">git 用法</a></li><li><a href="/knowledge/tool/yarn.html" class="sidebar-link">yarn更新到最新的版本</a></li><li><a href="/knowledge/tool/npm.html" class="sidebar-link">.npmrc用法</a></li><li><a href="/knowledge/tool/gulp.html" class="active sidebar-link">gulp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#buffer-from-buffer" class="sidebar-link">Buffer.from(buffer)</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#gulp-inject-利用注释来寻找插入的位置。获取源文件流，将每个文件转换为字符串，并将每个转换后的字符串注入目标流文件中的占位符" class="sidebar-link">gulp-inject 利用注释来寻找插入的位置。获取源文件流，将每个文件转换为字符串，并将每个转换后的字符串注入目标流文件中的占位符</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#through2用法" class="sidebar-link">through2用法</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#gulp-minify-ejs" class="sidebar-link">gulp-minify-ejs</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#创建任务（task）" class="sidebar-link">创建任务（task）</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#globs" class="sidebar-link">Globs</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#glob-base" class="sidebar-link">Glob base</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#glob-base-2" class="sidebar-link">Glob base</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#文件系统模式" class="sidebar-link">文件系统模式</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#模块" class="sidebar-link">模块</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#gulp-常用插件" class="sidebar-link">gulp 常用插件</a></li><li class="sidebar-sub-header"><a href="/knowledge/tool/gulp.html#yargs" class="sidebar-link">yargs</a></li></ul></li><li><a href="/knowledge/tool/command.html" class="sidebar-link">统计test.txt的行数</a></li><li><a href="/knowledge/tool/ssh.html" class="sidebar-link">什么是 SSH 以及常见 ssh 用法</a></li><li><a href="/knowledge/tool/easywebpack.html" class="sidebar-link">前端构建</a></li><li><a href="/knowledge/tool/webstorm.html" class="sidebar-link">总结webstorm的一些配置</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="gulp"><a href="#gulp" aria-hidden="true" class="header-anchor">#</a> gulp</h1> <blockquote><p>https://www.gulpjs.com.cn/docs/api/</p></blockquote> <h2 id="buffer-from-buffer"><a href="#buffer-from-buffer" aria-hidden="true" class="header-anchor">#</a> Buffer.from(buffer)</h2> <p>buffer <code>&lt;Buffer&gt;</code> | <code>&lt;Uint8Array&gt;</code> 要拷贝数据的 Buffer 或 Uint8Array。</p> <p>拷贝 buffer 的数据到新建的 Buffer 实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> buf1 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'buffer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> buf2 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>buf1<span class="token punctuation">)</span><span class="token punctuation">;</span>

buf1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x61</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过toString 进行格式化</span>
<span class="token comment">// 打印: auffer</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印: buffer</span>
</code></pre></div><h2 id="gulp-inject-利用注释来寻找插入的位置。获取源文件流，将每个文件转换为字符串，并将每个转换后的字符串注入目标流文件中的占位符"><a href="#gulp-inject-利用注释来寻找插入的位置。获取源文件流，将每个文件转换为字符串，并将每个转换后的字符串注入目标流文件中的占位符" aria-hidden="true" class="header-anchor">#</a> gulp-inject 利用注释来寻找插入的位置。获取源文件流，将每个文件转换为字符串，并将每个转换后的字符串注入目标流文件中的占位符</h2> <blockquote><p>https://www.cnblogs.com/jiaoshou/p/12041606.html</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev gulp-inject

</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code>  <span class="token comment">&lt;!-- inject:js --&gt;</span>
  <span class="token comment">&lt;!-- endinject --&gt;</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//  gulpfile.js文件</span>
<span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> inject <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-inject'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./src/index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//不需要读取文件（这会加快速度），我们只需要查看它们的路径：</span>

  <span class="token keyword">var</span> sources <span class="token operator">=</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./src/**/*.js'</span><span class="token punctuation">,</span> <span class="token string">'./src/**/*.css'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>read<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">inject</span><span class="token punctuation">(</span>sources<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./src'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="through2用法"><a href="#through2用法" aria-hidden="true" class="header-anchor">#</a> through2用法</h2> <div class="language-js extra-class"><pre class="language-js"><code>gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'rewrite'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./through/enter.txt'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>through2<span class="token punctuation">.</span><span class="token function">obj</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">chunk<span class="token punctuation">,</span> enc<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> contents <span class="token punctuation">}</span> <span class="token operator">=</span> chunk<span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> contents<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>contents<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">97</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          contents<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">122</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      chunk<span class="token punctuation">.</span>contents <span class="token operator">=</span> contents<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="gulp-minify-ejs"><a href="#gulp-minify-ejs" aria-hidden="true" class="header-anchor">#</a> gulp-minify-ejs</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> gulp-minify-ejs --save-dev
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">//rename = require(&quot;gulp-rename&quot;),</span>
    minifyejs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-minify-ejs'</span><span class="token punctuation">)</span>
 
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'minify-html'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'src/views/*.ejs'</span><span class="token punctuation">,</span><span class="token string">'src/views/*.html'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">minifyejs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">//.pipe(rename({suffix:&quot;.min&quot;}))</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="创建任务（task）"><a href="#创建任务（task）" aria-hidden="true" class="header-anchor">#</a> 创建任务（task）</h2> <h3 id="导出任务"><a href="#导出任务" aria-hidden="true" class="header-anchor">#</a> 导出任务</h3> <p>任务（tasks）可以是 public（公开） 或 private（私有） 类型的。</p> <ul><li>公开任务（Public tasks） 从 gulpfile 中被导出（export），可以通过 gulp 命令直接调用。</li> <li>私有任务（Private tasks） 被设计为在内部使用，通常作为 series() 或 parallel() 组合的组成部分。</li></ul> <p>一个私有（private）类型的任务（task）在外观和行为上和其他任务（task）是一样的，但是不能够被用户直接调用。如需将一个任务（task）注册为公开（public）类型的，只需从 gulpfile 中导出（export）即可。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> series <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// `clean` 函数并未被导出（export），因此被认为是私有任务（private task）。</span>
<span class="token comment">// 它仍然可以被用在 `series()` 组合中。</span>
<span class="token keyword">function</span> <span class="token function">clean</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// `build` 函数被导出（export）了，因此它是一个公开任务（public task），并且可以被 `gulp` 命令直接调用。</span>
<span class="token comment">// 它也仍然可以被用在 `series()` 组合中。</span>
<span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>build <span class="token operator">=</span> build<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>default <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>clean<span class="token punctuation">,</span> build<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="组合任务"><a href="#组合任务" aria-hidden="true" class="header-anchor">#</a> 组合任务</h3> <p>Gulp 提供了两个强大的组合方法： series() 和 parallel()，允许将多个独立的任务组合为一个更大的操作。这两个方法都可以接受任意数目的任务（task）函数或已经组合的操作。series() 和 parallel() 可以互相嵌套至任意深度。</p> <p>如果需要让任务（task）按顺序执行，请使用 series() 方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> series <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">transpile</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bundle</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>build <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>transpile<span class="token punctuation">,</span> bundle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>对于希望以最大并发来运行的任务（tasks），可以使用 parallel() 方法将它们组合起来。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> parallel <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">javascript</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">css</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>build <span class="token operator">=</span> <span class="token function">parallel</span><span class="token punctuation">(</span>javascript<span class="token punctuation">,</span> css<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当 series() 或 parallel() 被调用时，任务（tasks）被立即组合在一起。这就允许在组合中进行改变，而不需要在单个任务（task）中进行条件判断。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> series <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">minify</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">transpile</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">livereload</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  exports<span class="token punctuation">.</span>build <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>transpile<span class="token punctuation">,</span> minify<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  exports<span class="token punctuation">.</span>build <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>transpile<span class="token punctuation">,</span> livereload<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>series() 和 parallel() 可以被嵌套到任意深度。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> series<span class="token punctuation">,</span> parallel <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">clean</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">cssTranspile</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">cssMinify</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">jsTranspile</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">jsBundle</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">jsMinify</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">publish</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>build <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>
  clean<span class="token punctuation">,</span>
  <span class="token function">parallel</span><span class="token punctuation">(</span>
    cssTranspile<span class="token punctuation">,</span>
    <span class="token function">series</span><span class="token punctuation">(</span>jsTranspile<span class="token punctuation">,</span> jsBundle<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">parallel</span><span class="token punctuation">(</span>cssMinify<span class="token punctuation">,</span> jsMinify<span class="token punctuation">)</span><span class="token punctuation">,</span>
  publish
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当一个组合操作执行时，这个组合中的每一个任务每次被调用时都会被执行。例如，在两个不同的任务（task）之间调用的 clean 任务（task）将被执行两次，并且将导致不可预期的结果。因此，最好重构组合中的 clean 任务（task）。</p> <p>如果你有如下代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// This is INCORRECT</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> series<span class="token punctuation">,</span> parallel <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">clean</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> css <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>clean<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> javascript <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>clean<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>build <span class="token operator">=</span> <span class="token function">parallel</span><span class="token punctuation">(</span>css<span class="token punctuation">,</span> javascript<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>重构为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> series<span class="token punctuation">,</span> parallel <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">clean</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">css</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">javascript</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// body omitted</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>build <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>clean<span class="token punctuation">,</span> <span class="token function">parallel</span><span class="token punctuation">(</span>css<span class="token punctuation">,</span> javascript<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="globs"><a href="#globs" aria-hidden="true" class="header-anchor">#</a> Globs</h2> <p>glob 是一串文字和/或通配符，如 *, **, 或 !，用于匹配文件路径。Globbing 是使用一个或多个 globs 在文件系统上定位文件的操作。</p> <h3 id="字符串片段与分隔符"><a href="#字符串片段与分隔符" aria-hidden="true" class="header-anchor">#</a> 字符串片段与分隔符</h3> <p>避免使用node 的path 类方法来创建 glob，__dirname、__filename， process.cwd()</p> <ol><li>特殊字符： * (一个星号)</li></ol> <p>在一个字符串片段中匹配任意数量的字符，包括零个匹配。对于匹配单级目录下的文件很有用。</p> <p>下面这个 glob 能够匹配类似 index.js 的文件，但是不能匹配类似 scripts/index.js 或 scripts/nested/index.js 的文件。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'*.js'</span>
</code></pre></div><ol start="2"><li>特殊字符： ** (两个星号)
在多个字符串片段中匹配任意数量的字符，包括零个匹配。 对于匹配嵌套目录下的文件很有用。请确保适当地限制带有两个星号的 glob 的使用，以避免匹配大量不必要的目录。</li></ol> <p>下面这个 glob 被适当地限制在 scripts/ 目录下。它将匹配类似 scripts/index.js、scripts/nested/index.js 和 scripts/nested/twice/index.js 的文件。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'scripts/**/*.js'</span>
</code></pre></div><p>在上面的示例中，如果没有 scripts/ 这个前缀做限制，node_modules 目录下的所有目录或其他目录也都将被匹配。</p> <ol start="3"><li>特殊字符： ! (取反)
由于 glob 匹配时是按照每个 glob 在数组中的位置依次进行匹配操作的，所以 glob 数组中的取反（negative）glob 必须跟在一个非取反（non-negative）的 glob 后面。第一个 glob 匹配到一组匹配项，然后后面的取反 glob 删除这些匹配项中的一部分。如果取反 glob 只是由普通字符组成的字符串，则执行效率是最高的。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token string">'script/**/*.js'</span><span class="token punctuation">,</span> <span class="token string">'!scripts/vendor/'</span><span class="token punctuation">]</span>
</code></pre></div><p>如果任何非取反（non-negative）的 glob 跟随着一个取反（negative） glob，任何匹配项都不会被删除。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token string">'script/**/*.js'</span><span class="token punctuation">,</span> <span class="token string">'!scripts/vendor/'</span><span class="token punctuation">,</span> <span class="token string">'scripts/vendor/react.js'</span><span class="token punctuation">]</span>
</code></pre></div><p>取反（negative） glob 可以作为对带有两个星号的 glob 的限制手段。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token string">'**/*.js'</span><span class="token punctuation">,</span> <span class="token string">'!node_modules/'</span><span class="token punctuation">]</span>
</code></pre></div><p>在上面的示例中，如果取反（negative）glob 是 !node_modules/**/*.js，那么各匹配项都必须与取反 glob 进行比较，这将导致执行速度极慢。</p> <ol start="3"><li>匹配重叠（Overlapping globs）
两个或多个 glob 故意或无意匹配了相同的文件就被认为是匹配重叠（overlapping）了。如果在同一个 src() 中使用了会产生匹配重叠的 glob，gulp 将尽力去除重叠部分，但是在多个 src() 调用时产生的匹配重叠是不会被去重的。</li></ol> <h2 id="glob-base"><a href="#glob-base" aria-hidden="true" class="header-anchor">#</a> Glob base</h2> <p>glob base (有时称为 glob parent)是 glob 字符串中任何特殊字符之前的路径段。因此，/src/js/**.js 的 blob base 是 /src/js/。所有匹配 glob 的路径都保证共享 glob base——该路径段不能是可变的。</p> <p>由 src() 生成的 Vinyl 实例是用 glob base 集作为它们的 base 属性构造的。当使用 dest() 写入文件系统时，将从输出路径中删除 base ，以保留目录结构。</p> <p>有关更深入的信息，请参阅 glob-parent 库。</p> <h2 id="glob-base-2"><a href="#glob-base-2" aria-hidden="true" class="header-anchor">#</a> Glob base</h2> <p>glob base (有时称为 glob parent)是 glob 字符串中任何特殊字符之前的路径段。因此，/src/js/**.js 的 blob base 是 /src/js/。所有匹配 glob 的路径都保证共享 glob base——该路径段不能是可变的。</p> <p>由 src() 生成的 Vinyl 实例是用 glob base 集作为它们的 base 属性构造的。当使用 dest() 写入文件系统时，将从输出路径中删除 base ，以保留目录结构。</p> <p>有关更深入的信息，请参阅 glob-parent 库。</p> <h2 id="文件系统模式"><a href="#文件系统模式" aria-hidden="true" class="header-anchor">#</a> 文件系统模式</h2> <p>文件系统模式决定文件的权限。文件系统上的大多数文件和目录将具有相当宽松的模式，允许 gulp 代表您读取/写入/更新文件。默认情况下，gulp 将创建与运行进程具有相同权限的文件，但是您可以通过 src()、 dest() 中的选项配置模式。如果您遇到权限(EPERM)问题，请检查文件上的模式。</p> <h2 id="模块"><a href="#模块" aria-hidden="true" class="header-anchor">#</a> 模块</h2> <p>Gulp 由许多小模块组成，这些模块被拉到一起以实现内聚性工作。通过在小模块中使用 semver，我们可以在不发布 gulp 新版本的情况下发布 bug 修复和特性。通常，当您没有看到主存储库上的进展时，工作是在其中一个模块中完成的。</p> <p>如果遇到问题，请使用 npm update 命令更新当前模块。如果问题仍然存在，则在单个项目存储库上打开一个 issue</p> <h2 id="gulp-常用插件"><a href="#gulp-常用插件" aria-hidden="true" class="header-anchor">#</a> gulp 常用插件</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;devDependencies&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;gulp&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.9.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-autoprefixer&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^4.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-babel&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^7.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-css-spriter&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^0.4.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-debug&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^4.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-concat&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^2.6.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-ejs&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-ejs-template&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^0.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-filter&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^5.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-flatten&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^0.3.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-inject&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^4.3.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-less&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^4.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-load-plugins&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^1.5.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-minify-ejs&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^1.0.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-postcss&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^7.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-rename&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^1.2.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-replace&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^0.6.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-requirejs-optimize&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^1.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-rev&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^8.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-rev-replace&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^0.4.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-sass&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-size&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^2.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-useref&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;gulp-uglify&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^2.0.1&quot;</span>
    <span class="token string">&quot;gulp-watch&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^5.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="匹配符-、-、！、"><a href="#匹配符-、-、！、" aria-hidden="true" class="header-anchor">#</a> 匹配符 *、**、！、{}</h3> <div class="language-js extra-class"><pre class="language-js"><code>gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./js/*.js'</span><span class="token punctuation">)</span>               <span class="token comment">// * 匹配js文件夹下所有.js格式的文件</span>
gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./js/**/*.js'</span><span class="token punctuation">)</span>            <span class="token comment">// ** 匹配js文件夹的0个或多个子文件夹</span>
gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./js/*.js'</span><span class="token punctuation">,</span><span class="token string">'!./js/index.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// ! 匹配除了index.js之外的所有js文件</span>
gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./js/**/{main,common}.js'</span><span class="token punctuation">)</span>        <span class="token comment">// {} 匹配{}里的文件名</span>

</code></pre></div><h3 id="gulp-load-plugins"><a href="#gulp-load-plugins" aria-hidden="true" class="header-anchor">#</a> gulp-load-plugins</h3> <ul><li>用法</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. package.json包含一些依赖</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;dependencies&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;gulp-sass&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;gulp-concat&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2. 在gulpfile文件中引入gulp-load-plugins</span>
<span class="token keyword">const</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> gulpLoadplugins <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-load-plugins&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//gulpLoadplugins是定义的变量名，可自行修改</span>
<span class="token keyword">const</span> $ <span class="token operator">=</span> <span class="token function">gulpLoadplugins</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  pattern<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'gulp-*'</span><span class="token punctuation">]</span> <span class="token comment">// 将会在package.json中搜索gulp-开头的，直接使用$.sass去调用就行</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>默认配置项</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">gulpLoadPlugins</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token constant">DEBUG</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 设置为true时，该插件会将信息记录到控制台。 对于错误报告和问题调试很有用</span>
    pattern<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'gulp-*'</span><span class="token punctuation">,</span> <span class="token string">'gulp.*'</span><span class="token punctuation">,</span> <span class="token string">'@*/gulp{-,.}*'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 将会去搜索的数据</span>
    overridePattern<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 如果为true，则覆盖内置模式。 否则，扩展内置模式匹配器列表。</span>
    config<span class="token punctuation">:</span> <span class="token string">'package.json'</span><span class="token punctuation">,</span> <span class="token comment">// 定义从哪里搜索插件</span>
    scope<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dependencies'</span><span class="token punctuation">,</span> <span class="token string">'devDependencies'</span><span class="token punctuation">,</span> <span class="token string">'peerDependencies'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//在被搜索的文件中要去查看哪些键值</span>
    replaceString<span class="token punctuation">:</span> <span class="token regex">/^gulp(-|\.)/</span><span class="token punctuation">,</span> <span class="token comment">// 将模块添加到上下文时要从模块名称中删除的内容，例如gulp-rename在使用是为$.rename()即可，无需前缀</span>
    camelize<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//如果为true，则将带连字符的插件名称转换为驼峰式</span>
    lazy<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 插件是否应按需延迟加载</span>
    rename<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//重命名插件的映射</span>
    <span class="token function-variable function">renameFn</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//处理插件重命名的功能（默认有效）</span>
    postRequireTransforms<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// see documentation below</span>
    maintainScope<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// 切换加载所有npm范围，如非作用域包</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>https://juejin.im/post/5d9ece67f265da5b926bc9c2</p></blockquote> <h3 id="gulp-sass-用法"><a href="#gulp-sass-用法" aria-hidden="true" class="header-anchor">#</a> gulp-sass 用法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> gulpLoadplugins <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-load-plugins&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//gulpLoadplugins是定义的变量名，可自行修改</span>
<span class="token keyword">const</span> $ <span class="token operator">=</span> <span class="token function">gulpLoadplugins</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  pattern<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'gulp-*'</span><span class="token punctuation">]</span> <span class="token comment">// 将会在package.json中搜索gulp-开头的，直接使用$.sass去调用就行</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    outputStyle<span class="token punctuation">:</span> <span class="token string">'compressed'</span>
  <span class="token punctuation">}</span>
  gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'/dist/*.scss'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">sass</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> sass<span class="token punctuation">.</span>logError<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><ul><li>gulp-sass 设置不同样式风格的输出方法
嵌套输出方式 nested</li></ul> <p>展开输出方式 expanded</p> <p>紧凑输出方式 compact</p> <p>压缩输出方式 compressed</p> <blockquote><p>https://www.cnblogs.com/jiaoshou/p/5917361.html</p></blockquote> <h3 id="gulp-load-plugins-2"><a href="#gulp-load-plugins-2" aria-hidden="true" class="header-anchor">#</a> gulp-load-plugins</h3> <ul><li>它的作用是自动require你在package.json中的插件:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// gulpfile.js</span>
<span class="token keyword">var</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-load-plugins'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./**/*.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">'all.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'all.min.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gup<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="gulp-autoprefixer"><a href="#gulp-autoprefixer" aria-hidden="true" class="header-anchor">#</a> gulp-autoprefixer</h3> <ul><li>根据设置浏览器版本自动处理浏览器前缀</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> autoprefixer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./css/*.css'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">autoprefixer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>           <span class="token comment">// 直接添加前缀</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./css/*.css'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">autoprefixer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        browsers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'last 2 versions'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token comment">// 浏览器版本</span>
        cascade：<span class="token boolean">true</span>                       <span class="token operator">/</span><span class="token operator">/</span> 美化属性，默认<span class="token boolean">true</span>
        add<span class="token punctuation">:</span> <span class="token boolean">true</span>                           <span class="token operator">/</span><span class="token operator">/</span> 是否添加前缀，默认<span class="token boolean">true</span>
        remove<span class="token punctuation">:</span> <span class="token boolean">true</span>                        <span class="token operator">/</span><span class="token operator">/</span> 删除过时前缀，默认<span class="token boolean">true</span>
        flexbox<span class="token punctuation">:</span> <span class="token boolean">true</span>                       <span class="token operator">/</span><span class="token operator">/</span> 为flexbox属性添加前缀，默认<span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="gulp-rev-项目部署缓存解决方案"><a href="#gulp-rev-项目部署缓存解决方案" aria-hidden="true" class="header-anchor">#</a> gulp-rev 项目部署缓存解决方案</h3> <p>描述：给静态资源文件名添加hash值:main.css =&gt; main-d41d8cd98f.css</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rev <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-rev'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">default</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
	gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'src/*.css'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">rev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>rev<span class="token punctuation">.</span><span class="token function">mainfest</span><span class="token punctuation">(</span><span class="token string">'css-prod.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'/lib'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>API</li></ul> <h3 id="gulp-rev-replace-重写被gulp-rev重命名的文件名。"><a href="#gulp-rev-replace-重写被gulp-rev重命名的文件名。" aria-hidden="true" class="header-anchor">#</a> gulp-rev-replace 重写被gulp-rev重命名的文件名。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> rev <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-rev'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> revReplace <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-rev-replace'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> useref <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-useref'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">useref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                         <span class="token comment">// 替换HTML中引用的css和js</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">rev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                            <span class="token comment">// 给css,js,html加上hash版本号</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">revReplace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                     <span class="token comment">// 把引用的css和js替换成有版本号的名字</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="gulp-babel-将es6代码编译成es5。"><a href="#gulp-babel-将es6代码编译成es5。" aria-hidden="true" class="header-anchor">#</a> gulp-babel 将ES6代码编译成ES5。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> babel <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-babel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./js/index.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'es2015'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="gulp-uglify-压缩js文件大小。"><a href="#gulp-uglify-压缩js文件大小。" aria-hidden="true" class="header-anchor">#</a> gulp-uglify 压缩js文件大小。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> uglify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-uglify&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./hello.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                 <span class="token comment">// 直接压缩hello.js</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

 gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./hello.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        mangle<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>               <span class="token comment">// 是否修改变量名，默认为 true</span>
        compress<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>             <span class="token comment">// 是否完全压缩，默认为 true</span>
        preserveComments<span class="token punctuation">:</span> <span class="token string">'all'</span>     <span class="token comment">// 保留所有注释</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="gulp-filter-在虚拟文件流中过滤文件。"><a href="#gulp-filter-在虚拟文件流中过滤文件。" aria-hidden="true" class="header-anchor">#</a> gulp-filter  在虚拟文件流中过滤文件。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> filter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-filter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'**'</span><span class="token punctuation">,</span> <span class="token string">'!*/index.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'js/**/*.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>                        <span class="token comment">// 过滤掉index.js这个文件</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> f1 <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'**'</span><span class="token punctuation">,</span> <span class="token string">'!*/index.js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>restore<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'js/**/*.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span>                       <span class="token comment">// 过滤掉index.js这个文件</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                 <span class="token comment">// 对其他文件进行压缩</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>restore<span class="token punctuation">)</span>               <span class="token comment">// 返回到未过滤执行的所有文件</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 再对所有文件操作，包括index.js</span>
</code></pre></div><h3 id="gulp-concat-合并文件。"><a href="#gulp-concat-合并文件。" aria-hidden="true" class="header-anchor">#</a> gulp-concat  合并文件。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> concat <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-concat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./js/*.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">'all.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token comment">// 合并all.js文件</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./js/demo1.js'</span><span class="token punctuation">,</span><span class="token string">'./js/demo2.js'</span><span class="token punctuation">,</span><span class="token string">'./js/demo2.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">'all.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token operator">/</span><span class="token operator">/</span> 按照<span class="token punctuation">[</span><span class="token punctuation">]</span>里的顺序合并文件
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="gulp-rename-重命名文件。"><a href="#gulp-rename-重命名文件。" aria-hidden="true" class="header-anchor">#</a> gulp-rename 重命名文件。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> rename <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-rename&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./hello.txt'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'gb/goodbye.md'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 直接修改文件名和路径</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./hello.txt'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    dirname<span class="token punctuation">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>                <span class="token comment">// 路径名</span>
    basename<span class="token punctuation">:</span> <span class="token string">&quot;goodbye&quot;</span><span class="token punctuation">,</span>            <span class="token comment">// 主文件名</span>
    prefix<span class="token punctuation">:</span> <span class="token string">&quot;pre-&quot;</span><span class="token punctuation">,</span>                 <span class="token comment">// 前缀</span>
    suffix<span class="token punctuation">:</span> <span class="token string">&quot;-min&quot;</span><span class="token punctuation">,</span>                 <span class="token comment">// 后缀</span>
    extname<span class="token punctuation">:</span> <span class="token string">&quot;.html&quot;</span>                <span class="token comment">// 扩展名</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="gulp-clean-css用于css文件压缩"><a href="#gulp-clean-css用于css文件压缩" aria-hidden="true" class="header-anchor">#</a> gulp-clean-css用于css文件压缩</h3> <p>使用参数配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> gulp        <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    minifyCss   <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-clean-css'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    pump        <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'pump'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'cssmin'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">pump</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'src/css/*.css'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">minifyCss</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            keepSpecialComments<span class="token punctuation">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span>
            <span class="token comment">//保留所有特殊前缀 当你用autoprefixer生成的浏览器前缀，如果不加这个参数，有可能将会删除你的部分前缀</span>
            compatibility<span class="token punctuation">:</span> <span class="token string">'ie8'</span> <span class="token operator">/</span><span class="token operator">/</span> 兼容性
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'dist/css'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span> cb
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>gulp-minify-css也是实现相同功能，但gulp-minify-css现在已经被标记为deprecated</li></ul> <h3 id="del"><a href="#del" aria-hidden="true" class="header-anchor">#</a> del</h3> <p>删除文件及文件夹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> del <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'del'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">del</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre></div><h2 id="yargs"><a href="#yargs" aria-hidden="true" class="header-anchor">#</a> yargs</h2> <p>这个插件严格来说并不是专门用于gulp，它是Node中处理命令行参数的通用解决方案，只要一句代码 var args = require('yargs').argv;就可以让命令行的参数都放在变量args上，可以根据参数判断是测试环境还是正式环境。</p> <p>单字符的简单参数，如传入-m=5或-m 5，则可得到args.m = 5
多字符参数（必须使用双连字符），如传入--test=5或--test 5，则可得到args.test = 5。
不带值的参数，如传入--production，则会被认为是布尔类型的参数，可得到args.production = true</p> <h3 id="gulp-util"><a href="#gulp-util" aria-hidden="true" class="header-anchor">#</a> gulp-util</h3> <p>gulp-util带有很多方便的函数，其中最常用的应该就是log了。var gutil = require('gulp-util');支持传入多个参数，打印结果会将多个参数用空格连接起来。console.log的区别就是所有gutil.log的结果会自动带上时间前缀。另外，它还支持颜色，如gutil.log(gutil.colors.red('test'));打印出来的test是红色的。其实gutil.colors就是一个chalk的实例，而chalk是专门用来处理命令行打印着色的一个工具。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> gutil <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-util'</span><span class="token punctuation">)</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gutil<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">)</span>
    gutil<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gutil<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    gutil<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gutil<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token string">'message:'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;some&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/knowledge/tool/npm.html" class="prev">
          .npmrc用法
        </a></span> <span class="next"><a href="/knowledge/tool/command.html">
          统计test.txt的行数
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/knowledge/assets/js/app.e8dd3cdf.js" defer></script><script src="/knowledge/assets/js/171.f0323177.js" defer></script>
  </body>
</html>
