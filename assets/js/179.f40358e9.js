(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{453:function(a,e,t){"use strict";t.r(e);var s=t(0),n=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"lerna简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lerna简介","aria-hidden":"true"}},[a._v("#")]),a._v(" Lerna简介")]),a._v(" "),t("h2",{attrs:{id:"原生脚手架开发痛点分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原生脚手架开发痛点分析","aria-hidden":"true"}},[a._v("#")]),a._v(" 原生脚手架开发痛点分析")]),a._v(" "),t("ul",[t("li",[a._v("痛点1： 重复操作\n"),t("ul",[t("li",[a._v("多Package本地link")]),a._v(" "),t("li",[a._v("多Package本地依赖安装")]),a._v(" "),t("li",[a._v("多Package单元测试")]),a._v(" "),t("li",[a._v("多Package代码提交")]),a._v(" "),t("li",[a._v("多Package代码发布")])])]),a._v(" "),t("li",[a._v("痛点二： 版本一致性问题\n"),t("ul",[t("li",[a._v("发布时版本一致性")]),a._v(" "),t("li",[a._v("发布后相互依赖版本升级")])])])]),a._v(" "),t("blockquote",[t("p",[a._v("Package越多，管理复杂度越高")])]),a._v(" "),t("h2",{attrs:{id:"lerna-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lerna-简介","aria-hidden":"true"}},[a._v("#")]),a._v(" Lerna 简介")]),a._v(" "),t("p",[a._v("Lerna 是一个优化基于git+npm多多package项目的管理工具")]),a._v(" "),t("h3",{attrs:{id:"优势"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优势","aria-hidden":"true"}},[a._v("#")]),a._v(" 优势")]),a._v(" "),t("ul",[t("li",[a._v("大幅减少重复操作")]),a._v(" "),t("li",[a._v("升级操作的标准化")])]),a._v(" "),t("blockquote",[t("p",[a._v("Lerna 是架构优化的产物，它揭示了一个架构真理：项目复杂度提升后，就需要对项目进行架构优化。架构优化的主要目的往往都是以效能为核心。")])]),a._v(" "),t("h3",{attrs:{id:"官网：-https-lerna-js-org"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官网：-https-lerna-js-org","aria-hidden":"true"}},[a._v("#")]),a._v(" 官网： https://lerna.js.org/")]),a._v(" "),t("p",[a._v("案例：babel,vue-cli,create-react-app")]),a._v(" "),t("h2",{attrs:{id:"lerna-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lerna-命令","aria-hidden":"true"}},[a._v("#")]),a._v(" lerna 命令")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("lerna "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" -h\nlerna create name "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 创建name的packages")]),a._v("\n\nlerna clean "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 清空依赖")]),a._v("\nlerna "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" @dr-cli-dev/utils packages/core "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在core安装utils依赖")]),a._v("\nlerna bootstrap "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重新安装依赖")]),a._v("\n\nlerna "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("link")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 相互依赖")]),a._v("\n\nlerna "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("exec")]),a._v(" -- "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -rf node_modules "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 执行packages里的exec命令")]),a._v("\nlerna "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("exec")]),a._v(" --scope my-component -- "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" -la "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#执行指定命令")]),a._v("\n\nlerna run "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("test")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 执行每个packages下的npm 脚本")]),a._v("\n\nlerna publish\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# lerna ERR! E402 You must sign up for private packages")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"publishConfig"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"access"')]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"public"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("require('.') 等价于 require('./index.js')")]),a._v(" "),t("p",[a._v("本地开发，可以使用file:../core")])])}],!1,null,null,null);e.default=n.exports}}]);