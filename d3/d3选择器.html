<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>d3 选择器 | oliveying</title>
    <meta name="description" content="前端知识，对前端遇到的问题进行总结">
    <link rel="icon" href="/knowledge/img/favicon.ico">
    
    <link rel="preload" href="/knowledge/assets/css/0.styles.ace1f307.css" as="style"><link rel="preload" href="/knowledge/assets/js/app.5a0872b2.js" as="script"><link rel="preload" href="/knowledge/assets/js/15.74572eea.js" as="script"><link rel="prefetch" href="/knowledge/assets/js/10.eae2a5d2.js"><link rel="prefetch" href="/knowledge/assets/js/100.802c0834.js"><link rel="prefetch" href="/knowledge/assets/js/101.d24426d4.js"><link rel="prefetch" href="/knowledge/assets/js/102.f169c6ca.js"><link rel="prefetch" href="/knowledge/assets/js/103.d48067af.js"><link rel="prefetch" href="/knowledge/assets/js/104.53d9abab.js"><link rel="prefetch" href="/knowledge/assets/js/105.1ce60fb2.js"><link rel="prefetch" href="/knowledge/assets/js/106.56a59d8d.js"><link rel="prefetch" href="/knowledge/assets/js/107.e7f338d8.js"><link rel="prefetch" href="/knowledge/assets/js/108.2d2c9f4d.js"><link rel="prefetch" href="/knowledge/assets/js/109.480d180c.js"><link rel="prefetch" href="/knowledge/assets/js/11.bc156b13.js"><link rel="prefetch" href="/knowledge/assets/js/110.42929909.js"><link rel="prefetch" href="/knowledge/assets/js/111.9ed18e9a.js"><link rel="prefetch" href="/knowledge/assets/js/112.641a254e.js"><link rel="prefetch" href="/knowledge/assets/js/113.8dd5ad83.js"><link rel="prefetch" href="/knowledge/assets/js/114.72faba55.js"><link rel="prefetch" href="/knowledge/assets/js/115.faf4c4c8.js"><link rel="prefetch" href="/knowledge/assets/js/116.234a5673.js"><link rel="prefetch" href="/knowledge/assets/js/117.830c4383.js"><link rel="prefetch" href="/knowledge/assets/js/118.61c259f5.js"><link rel="prefetch" href="/knowledge/assets/js/119.aa99b6c7.js"><link rel="prefetch" href="/knowledge/assets/js/12.931677be.js"><link rel="prefetch" href="/knowledge/assets/js/120.91803733.js"><link rel="prefetch" href="/knowledge/assets/js/121.41400a34.js"><link rel="prefetch" href="/knowledge/assets/js/122.b0e900b9.js"><link rel="prefetch" href="/knowledge/assets/js/123.85bc68bd.js"><link rel="prefetch" href="/knowledge/assets/js/124.abcef56d.js"><link rel="prefetch" href="/knowledge/assets/js/125.4cf3dc1b.js"><link rel="prefetch" href="/knowledge/assets/js/126.df280400.js"><link rel="prefetch" href="/knowledge/assets/js/127.de3bbce3.js"><link rel="prefetch" href="/knowledge/assets/js/128.319a8ac1.js"><link rel="prefetch" href="/knowledge/assets/js/129.ce316193.js"><link rel="prefetch" href="/knowledge/assets/js/13.526f89dd.js"><link rel="prefetch" href="/knowledge/assets/js/130.eb7a7d1b.js"><link rel="prefetch" href="/knowledge/assets/js/131.7d714313.js"><link rel="prefetch" href="/knowledge/assets/js/132.137999fa.js"><link rel="prefetch" href="/knowledge/assets/js/133.0b997212.js"><link rel="prefetch" href="/knowledge/assets/js/134.c12612e9.js"><link rel="prefetch" href="/knowledge/assets/js/135.4b8f7667.js"><link rel="prefetch" href="/knowledge/assets/js/136.7ef9e9ce.js"><link rel="prefetch" href="/knowledge/assets/js/137.c0268769.js"><link rel="prefetch" href="/knowledge/assets/js/138.24759905.js"><link rel="prefetch" href="/knowledge/assets/js/139.eb3d2ee4.js"><link rel="prefetch" href="/knowledge/assets/js/14.d6a2386d.js"><link rel="prefetch" href="/knowledge/assets/js/140.6ff6905f.js"><link rel="prefetch" href="/knowledge/assets/js/141.ef7245be.js"><link rel="prefetch" href="/knowledge/assets/js/142.b5558282.js"><link rel="prefetch" href="/knowledge/assets/js/143.976eceac.js"><link rel="prefetch" href="/knowledge/assets/js/144.06f9b721.js"><link rel="prefetch" href="/knowledge/assets/js/145.5376f22f.js"><link rel="prefetch" href="/knowledge/assets/js/146.e0e3f524.js"><link rel="prefetch" href="/knowledge/assets/js/147.9d2b5d3a.js"><link rel="prefetch" href="/knowledge/assets/js/148.bf76d68e.js"><link rel="prefetch" href="/knowledge/assets/js/149.6923726c.js"><link rel="prefetch" href="/knowledge/assets/js/150.34d35c10.js"><link rel="prefetch" href="/knowledge/assets/js/151.09fcc9a8.js"><link rel="prefetch" href="/knowledge/assets/js/152.99828d17.js"><link rel="prefetch" href="/knowledge/assets/js/153.6fccc2a6.js"><link rel="prefetch" href="/knowledge/assets/js/154.d5683e55.js"><link rel="prefetch" href="/knowledge/assets/js/155.57a12139.js"><link rel="prefetch" href="/knowledge/assets/js/156.9fcb159b.js"><link rel="prefetch" href="/knowledge/assets/js/157.c387655e.js"><link rel="prefetch" href="/knowledge/assets/js/158.54f5bf1c.js"><link rel="prefetch" href="/knowledge/assets/js/159.d2008d75.js"><link rel="prefetch" href="/knowledge/assets/js/16.3d09273f.js"><link rel="prefetch" href="/knowledge/assets/js/160.1f12adec.js"><link rel="prefetch" href="/knowledge/assets/js/161.fb35e136.js"><link rel="prefetch" href="/knowledge/assets/js/162.58411844.js"><link rel="prefetch" href="/knowledge/assets/js/163.79ec2a0e.js"><link rel="prefetch" href="/knowledge/assets/js/164.716714f9.js"><link rel="prefetch" href="/knowledge/assets/js/165.43a634b3.js"><link rel="prefetch" href="/knowledge/assets/js/166.dd48158b.js"><link rel="prefetch" href="/knowledge/assets/js/167.bd803e05.js"><link rel="prefetch" href="/knowledge/assets/js/168.076d612b.js"><link rel="prefetch" href="/knowledge/assets/js/169.2870fd30.js"><link rel="prefetch" href="/knowledge/assets/js/17.1cd6b989.js"><link rel="prefetch" href="/knowledge/assets/js/170.42dea76e.js"><link rel="prefetch" href="/knowledge/assets/js/171.08397072.js"><link rel="prefetch" href="/knowledge/assets/js/172.c6bad46d.js"><link rel="prefetch" href="/knowledge/assets/js/18.b472874f.js"><link rel="prefetch" href="/knowledge/assets/js/19.519eeb36.js"><link rel="prefetch" href="/knowledge/assets/js/2.4277b334.js"><link rel="prefetch" href="/knowledge/assets/js/20.71bbb4dd.js"><link rel="prefetch" href="/knowledge/assets/js/21.c3e7bbbb.js"><link rel="prefetch" href="/knowledge/assets/js/22.7586bec6.js"><link rel="prefetch" href="/knowledge/assets/js/23.3b8a3e4f.js"><link rel="prefetch" href="/knowledge/assets/js/24.a76b5f2b.js"><link rel="prefetch" href="/knowledge/assets/js/25.a9b7ed33.js"><link rel="prefetch" href="/knowledge/assets/js/26.45bedfeb.js"><link rel="prefetch" href="/knowledge/assets/js/27.60f34284.js"><link rel="prefetch" href="/knowledge/assets/js/28.269fb6ad.js"><link rel="prefetch" href="/knowledge/assets/js/29.d94aad0b.js"><link rel="prefetch" href="/knowledge/assets/js/3.2c14a60e.js"><link rel="prefetch" href="/knowledge/assets/js/30.ffdd8fcc.js"><link rel="prefetch" href="/knowledge/assets/js/31.da22b354.js"><link rel="prefetch" href="/knowledge/assets/js/32.fb84698a.js"><link rel="prefetch" href="/knowledge/assets/js/33.106f4b5e.js"><link rel="prefetch" href="/knowledge/assets/js/34.6bf79fca.js"><link rel="prefetch" href="/knowledge/assets/js/35.e3e3d5f0.js"><link rel="prefetch" href="/knowledge/assets/js/36.38e6c7f5.js"><link rel="prefetch" href="/knowledge/assets/js/37.9a658e5a.js"><link rel="prefetch" href="/knowledge/assets/js/38.5e07db2d.js"><link rel="prefetch" href="/knowledge/assets/js/39.b9b1729a.js"><link rel="prefetch" href="/knowledge/assets/js/4.0c9cd7fa.js"><link rel="prefetch" href="/knowledge/assets/js/40.a7237a56.js"><link rel="prefetch" href="/knowledge/assets/js/41.c9c1fd5a.js"><link rel="prefetch" href="/knowledge/assets/js/42.81f63288.js"><link rel="prefetch" href="/knowledge/assets/js/43.820c89b5.js"><link rel="prefetch" href="/knowledge/assets/js/44.bffc33f6.js"><link rel="prefetch" href="/knowledge/assets/js/45.80d686a2.js"><link rel="prefetch" href="/knowledge/assets/js/46.4e9ed751.js"><link rel="prefetch" href="/knowledge/assets/js/47.a888dda5.js"><link rel="prefetch" href="/knowledge/assets/js/48.009574f0.js"><link rel="prefetch" href="/knowledge/assets/js/49.fa1e59fb.js"><link rel="prefetch" href="/knowledge/assets/js/5.18b09f48.js"><link rel="prefetch" href="/knowledge/assets/js/50.fdb85b4f.js"><link rel="prefetch" href="/knowledge/assets/js/51.4c63d9e0.js"><link rel="prefetch" href="/knowledge/assets/js/52.d9bc0e91.js"><link rel="prefetch" href="/knowledge/assets/js/53.b728eaa1.js"><link rel="prefetch" href="/knowledge/assets/js/54.d54a35cf.js"><link rel="prefetch" href="/knowledge/assets/js/55.4856b115.js"><link rel="prefetch" href="/knowledge/assets/js/56.90f8fe73.js"><link rel="prefetch" href="/knowledge/assets/js/57.9da484d5.js"><link rel="prefetch" href="/knowledge/assets/js/58.bec812af.js"><link rel="prefetch" href="/knowledge/assets/js/59.8cbeb66e.js"><link rel="prefetch" href="/knowledge/assets/js/6.44f2b87d.js"><link rel="prefetch" href="/knowledge/assets/js/60.b8b7ef05.js"><link rel="prefetch" href="/knowledge/assets/js/61.2796bd5a.js"><link rel="prefetch" href="/knowledge/assets/js/62.8c2ed07a.js"><link rel="prefetch" href="/knowledge/assets/js/63.c844ecea.js"><link rel="prefetch" href="/knowledge/assets/js/64.d1f5589d.js"><link rel="prefetch" href="/knowledge/assets/js/65.35a00b4e.js"><link rel="prefetch" href="/knowledge/assets/js/66.a6da4b57.js"><link rel="prefetch" href="/knowledge/assets/js/67.083505e6.js"><link rel="prefetch" href="/knowledge/assets/js/68.db7346a2.js"><link rel="prefetch" href="/knowledge/assets/js/69.aafedac2.js"><link rel="prefetch" href="/knowledge/assets/js/7.95f897d3.js"><link rel="prefetch" href="/knowledge/assets/js/70.aef2eb91.js"><link rel="prefetch" href="/knowledge/assets/js/71.2e561319.js"><link rel="prefetch" href="/knowledge/assets/js/72.ae391d45.js"><link rel="prefetch" href="/knowledge/assets/js/73.2ed6b8fb.js"><link rel="prefetch" href="/knowledge/assets/js/74.720ccbe8.js"><link rel="prefetch" href="/knowledge/assets/js/75.edeaf276.js"><link rel="prefetch" href="/knowledge/assets/js/76.9652c254.js"><link rel="prefetch" href="/knowledge/assets/js/77.f5ebafdb.js"><link rel="prefetch" href="/knowledge/assets/js/78.f526b095.js"><link rel="prefetch" href="/knowledge/assets/js/79.6077cbe9.js"><link rel="prefetch" href="/knowledge/assets/js/8.69088bf5.js"><link rel="prefetch" href="/knowledge/assets/js/80.20dd5867.js"><link rel="prefetch" href="/knowledge/assets/js/81.907130e1.js"><link rel="prefetch" href="/knowledge/assets/js/82.01d333ce.js"><link rel="prefetch" href="/knowledge/assets/js/83.73ce2b5b.js"><link rel="prefetch" href="/knowledge/assets/js/84.ffb2ee2d.js"><link rel="prefetch" href="/knowledge/assets/js/85.f19180e9.js"><link rel="prefetch" href="/knowledge/assets/js/86.62716243.js"><link rel="prefetch" href="/knowledge/assets/js/87.66cf0ebb.js"><link rel="prefetch" href="/knowledge/assets/js/88.461811cf.js"><link rel="prefetch" href="/knowledge/assets/js/89.d63bebd9.js"><link rel="prefetch" href="/knowledge/assets/js/9.f7f1342e.js"><link rel="prefetch" href="/knowledge/assets/js/90.6f3cdf9e.js"><link rel="prefetch" href="/knowledge/assets/js/91.59d6caeb.js"><link rel="prefetch" href="/knowledge/assets/js/92.1e3ab13b.js"><link rel="prefetch" href="/knowledge/assets/js/93.898a1d5b.js"><link rel="prefetch" href="/knowledge/assets/js/94.268625dc.js"><link rel="prefetch" href="/knowledge/assets/js/95.daf4454d.js"><link rel="prefetch" href="/knowledge/assets/js/96.b322e51c.js"><link rel="prefetch" href="/knowledge/assets/js/97.a388f677.js"><link rel="prefetch" href="/knowledge/assets/js/98.226630ed.js"><link rel="prefetch" href="/knowledge/assets/js/99.e8a19d47.js">
    <link rel="stylesheet" href="/knowledge/assets/css/0.styles.ace1f307.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge/" class="home-link router-link-active"><!----> <span class="site-name">oliveying</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">book</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/bgoodparts/" class="nav-link">语言精粹</a></li><li class="dropdown-item"><!----> <a href="/knowledge/http/" class="nav-link">图解http</a></li><li class="dropdown-item"><!----> <a href="/knowledge/es6/" class="nav-link">es6</a></li><li class="dropdown-item"><!----> <a href="/knowledge/javascript/" class="nav-link">javascript教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/knowledge/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/knowledge/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/knowledge/jsHigh/" class="nav-link">javascriptHigh</a></li><li class="dropdown-item"><!----> <a href="/knowledge/h5/" class="nav-link">h5最新用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/knowledge/brower/" class="nav-link">浏览器特性</a></li><li class="dropdown-item"><!----> <a href="/knowledge/d3/" class="nav-link router-link-active">d3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/summary/" class="nav-link">总结</a></li><li class="dropdown-item"><!----> <a href="/knowledge/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/knowledge/problem/" class="nav-link">problem</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">扩展</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/start/" class="nav-link">启动</a></li><li class="dropdown-item"><!----> <a href="/knowledge/tool/" class="nav-link">工具用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/markdown/" class="nav-link">markDown</a></li><li class="dropdown-item"><!----> <a href="/knowledge/linux/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/knowledge/mac/" class="nav-link">mac</a></li><li class="dropdown-item"><!----> <a href="/knowledge/develop/" class="nav-link">提升</a></li><li class="dropdown-item"><!----> <a href="/knowledge/redis/" class="nav-link">redis</a></li></ul></div></div> <a href="https://github.com/oliveying/knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">book</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/bgoodparts/" class="nav-link">语言精粹</a></li><li class="dropdown-item"><!----> <a href="/knowledge/http/" class="nav-link">图解http</a></li><li class="dropdown-item"><!----> <a href="/knowledge/es6/" class="nav-link">es6</a></li><li class="dropdown-item"><!----> <a href="/knowledge/javascript/" class="nav-link">javascript教程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/knowledge/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/knowledge/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/knowledge/jsHigh/" class="nav-link">javascriptHigh</a></li><li class="dropdown-item"><!----> <a href="/knowledge/h5/" class="nav-link">h5最新用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/knowledge/brower/" class="nav-link">浏览器特性</a></li><li class="dropdown-item"><!----> <a href="/knowledge/d3/" class="nav-link router-link-active">d3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/summary/" class="nav-link">总结</a></li><li class="dropdown-item"><!----> <a href="/knowledge/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/knowledge/problem/" class="nav-link">problem</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">扩展</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/start/" class="nav-link">启动</a></li><li class="dropdown-item"><!----> <a href="/knowledge/tool/" class="nav-link">工具用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/markdown/" class="nav-link">markDown</a></li><li class="dropdown-item"><!----> <a href="/knowledge/linux/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/knowledge/mac/" class="nav-link">mac</a></li><li class="dropdown-item"><!----> <a href="/knowledge/develop/" class="nav-link">提升</a></li><li class="dropdown-item"><!----> <a href="/knowledge/redis/" class="nav-link">redis</a></li></ul></div></div> <a href="https://github.com/oliveying/knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/knowledge/d3/d3选择器.html" class="active sidebar-link">d3 选择器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#获取html-的元素method" class="sidebar-link">获取html 的元素Method</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#attr-method" class="sidebar-link">attr() method</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#style-method" class="sidebar-link">style() method</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#d3-js-数据加入" class="sidebar-link">d3.js 数据加入</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#svg-简介" class="sidebar-link">svg 简介</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#svg-转换" class="sidebar-link">SVG 转换</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#d3-js-transition" class="sidebar-link">D3.js - Transition</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#d3-js-动画" class="sidebar-link">D3.js - 动画</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#d3-js-绘制图表" class="sidebar-link">D3.js - 绘制图表</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="d3-选择器"><a href="#d3-选择器" aria-hidden="true" class="header-anchor">#</a> <code>d3</code> 选择器</h1> <h2 id="获取html-的元素method"><a href="#获取html-的元素method" aria-hidden="true" class="header-anchor">#</a> 获取html 的元素Method</h2> <h3 id="select-选择器-selectall-选择器"><a href="#select-选择器-selectall-选择器" aria-hidden="true" class="header-anchor">#</a> select 选择器 selectAll 选择器</h3> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'.div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'#div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="append-method"><a href="#append-method" aria-hidden="true" class="header-anchor">#</a> append() method</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> body <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> span <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span> <span class="token comment">// &lt;div&gt;&lt;span&gt;d3.js&lt;span&gt;&lt;div&gt;</span>
span<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'from d3.js'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="html-method"><a href="#html-method" aria-hidden="true" class="header-anchor">#</a> html() method</h3> <div class="language-js extra-class"><pre class="language-js"><code> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World! &lt;span&gt;from D3.js&lt;/span&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 替换myclass中的内容，span标签会解析</span>
</code></pre></div><h2 id="attr-method"><a href="#attr-method" aria-hidden="true" class="header-anchor">#</a> attr() method</h2> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;color: red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="style-method"><a href="#style-method" aria-hidden="true" class="header-anchor">#</a> style() method</h2> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="the-classed-method"><a href="#the-classed-method" aria-hidden="true" class="header-anchor">#</a> The classed() Method</h3> <p>classed（）方法专门用于设置HTML元素的&quot;class&quot;属性。此方法知道如何处理元素上的一个或多个类，并且它将具有高性能。</p> <ul><li>添加类:要添加类，必须将分类方法的第二个参数设置为true。 它定义如下:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">&quot;addclass&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>删除类:要删除类，必须将分类方法的第二个参数设置为false。 它定义如下:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">&quot;removeclass&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>检查类:要检查是否存在类，只需省略第二个参数并传递要查询的类名。 如果存在则返回true，如果不存在，则返回false。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">&quot;hasclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果选择中的任何元素具有类，则返回true。 使用d3.select进行单个元素选择。</p> <ul><li>切换类:将类翻转到相反的状态 - 如果它已经存在则将其删除，如果它尚不存在则添加它 - 您可以执行以下操作之一。</li></ul> <p>对于单个元素，代码可能如下所示:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> element <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span>
element<span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">&quot;myanotherclass&quot;</span><span class="token punctuation">,</span> <span class="token operator">!</span>oneBar<span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">&quot;myanotherclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="the-selectall-method"><a href="#the-selectall-method" aria-hidden="true" class="header-anchor">#</a> The selectAll() Method</h3> <p>selectAll（）方法用于选择HTML文档中的多个元素。 select方法选择第一个元素，但selectAll方法选择与特定选择器字符串匹配的所有元素。 如果选择匹配none，则返回空选择。 我们也可以在selectAll（）方法中链接所有附加的修改方法，append（），html（），text（），attr（），style（），classed（）等。 在这种情况下，方法将影响所有匹配元素。</p> <div class="language-js extra-class"><pre class="language-js"><code> d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;color: red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="d3-js-数据加入"><a href="#d3-js-数据加入" aria-hidden="true" class="header-anchor">#</a> d3.js 数据加入</h2> <p>默认情况下，D3.js在其方法中为数据集提供最高优先级，并且数据集中的每个项对应于HTML元素.本章详细介绍了数据连接.</p> <h3 id="什么是数据连接？"><a href="#什么是数据连接？" aria-hidden="true" class="header-anchor">#</a> 什么是数据连接？</h3> <p>数据连接使我们能够注入，修改和删除元素(HTML元素)以及基于现有HTML文档中的数据集的嵌入式SVG元素.默认情况下，数据集中的每个数据项对应于文档中的元素(图形).</p> <p>随着数据集的变化，也可以轻松操作相应的元素.数据连接在我们的数据和文档的图形元素之间创建了一种紧密的关系.数据连接使得基于数据集的元素操作变得非常简单和容易.</p> <ul><li>数据连接如何工作？</li></ul> <p>主要目的是数据连接是使用给定的数据集映射现有文档的元素.它根据给定的数据集创建文档的虚拟表示，并提供使用虚拟表示的方法.让我们考虑一个简单的数据集，如下所示.</p> <p>数据集有五个项目，因此，它可以映射到文档的五个元素.让我们使用选择器的selectAll()方法和数据连接的data()方法将它映射到以下文档的 li 元素.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>remove<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>Remove fourth value<span class="token punctuation">&quot;</span></span> 
         <span class="token attr-name">onclick</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>remove()<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">/* D3.js代码
d3.select(&quot;＃list &quot;).selectAll(&quot;li&quot;).data([10,20,30,25,15]);
前两个虚拟元素对应文档中定义的两个 li 元素
1. li - 10
2. li - 20
// 我们可以使用所有选择器的元素修改方法，如 attr()，style()，text ()等，对于前两个 li 

d3.select(&quot;#list&quot;).selectAll(&quot;li&quot;)
   .data([10, 20, 30, 25, 15])
   .text(function(d) { return d; }); // 填充前两个li

下一个三个元素可以映射到任何元素，可以使用数据连接的enter()和selector的append()方法完成. enter()方法提供对剩余数据的访问(未映射到现有元素)，append()方法用于从相应数据创建新元素.我们也为剩余的数据项创建 li .数据地图如下 :

3. li - 30
4. li - 25
5. li - 15
*/</span>
<span class="token comment">// 创建新的li元素的代码如下 :</span>
d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;This is pre-existing element and the value is &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> 
      <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;This is dynamically created element and the value is &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 数据连接提供另一种方法，称为 exit()方法，用于处理从数据集中动态删除的数据项，我们已经从数据集及其相应的li中删除了第四项exit()和remove()方法.</span>
      <span class="token keyword">function</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="data-join-methods"><a href="#data-join-methods" aria-hidden="true" class="header-anchor">#</a> Data Join Methods</h3> <p>数据连接提供以下四种方法来处理数据集:</p> <ul><li>datum()</li> <li>data()</li> <li>enter()</li> <li>exit()</li></ul> <h4 id="the-datum-method"><a href="#the-datum-method" aria-hidden="true" class="header-anchor">#</a> The datum() Method</h4> <p>datum（）方法用于为HTML文档中的单个元素设置值。 一旦使用选择器选择元素，就会使用它。 例如，我们可以使用select（）方法选择现有元素（p标签），然后使用datum（）方法设置数据。 设置数据后，我们可以更改所选元素的文本或添加新元素，并使用datum（）方法设置的数据分配文本。</p> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">datum</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> <span class="token string">&quot;Used existing paragraph element and the data &quot;</span> <span class="token operator">+</span> d <span class="token operator">+</span> <span class="token string">&quot; is assigned.&quot;</span><span class="token punctuation">;</span> <span class="token comment">// p元素里的文本</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
         d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">datum</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> <span class="token string">&quot;Created new paragraph element and the data &quot;</span> <span class="token operator">+</span> d <span class="token operator">+</span> <span class="token string">&quot; is assigned.&quot;</span><span class="token punctuation">;</span> <span class="token comment">// div里插入p，设置p的文本为datum里的data</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="the-data-method"><a href="#the-data-method" aria-hidden="true" class="header-anchor">#</a> The data() method</h4> <p>data（）方法用于将数据集分配给HTML文档中的元素集合。 使用选择器选择HTML元素后使用它。 在我们的列表示例中，我们使用它来设置li选择器的数据集。</p> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="the-enter-method"><a href="#the-enter-method" aria-hidden="true" class="header-anchor">#</a> The enter() method</h3> <p>enter（）方法输出之前没有图形元素的数据项集。 在我们的列表示例中，我们使用它来创建新的li元素。</p> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;This is pre-existing element and the value is &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;This is dynamically created element and the value is &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="the-exit-method"><a href="#the-exit-method" aria-hidden="true" class="header-anchor">#</a> The exit() method</h4> <p>exit（）方法输出不再存在数据的图形元素集。 在我们的列表示例中，我们使用它通过删除数据集中的数据项来动态删除其中一个li元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="data-function"><a href="#data-function" aria-hidden="true" class="header-anchor">#</a> Data Function</h4> <p>在DOM操作章节中，我们了解了D3.js中的不同DOM操作方法，例如style（），text（）等。这些函数中的每一个通常都以常量值作为参数。 然而，在Data join的上下文中，它将匿名函数作为参数。 此匿名函数获取相应的数据和使用data（）方法分配的数据集的索引。 因此，将为绑定到DOM的每个数据值调用此匿名函数。 考虑以下text（）函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在此函数中，我们可以应用任何逻辑来操纵数据。 这些是匿名函数，意味着没有与函数关联的名称。 除了data（d）和index（i）参数之外，我们可以使用此关键字访问当前对象，如下所示:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> paragraph <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// the data element</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// the index element</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// the current DOM object</span>
  <span class="token comment">// 参数&quot;d&quot;为您提供数据元素，&quot;i&quot;为您提供数组中的数据索引，&quot;this&quot;是当前DOM元素的引用</span>
  <span class="token keyword">return</span> <span class="token string">&quot;The index is &quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot; and the data is &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="svg-简介"><a href="#svg-简介" aria-hidden="true" class="header-anchor">#</a> svg 简介</h2> <p>SVG代表可缩放矢量图形. SVG是一种基于XML的矢量图形格式.它提供了绘制不同形状的选项，如直线，矩形，圆形，椭圆等.因此，使用SVG设计可视化为您提供更多的功能和灵活性.</p> <h3 id="svg的功能"><a href="#svg的功能" aria-hidden="true" class="header-anchor">#</a> SVG的功能</h3> <p>SVG的一些显着特征如下:</p> <ul><li><p>SVG是一种基于矢量的图像格式，它是基于文本的.</p></li> <li><p>SVG在结构上与HTML类似.</p></li> <li><p>SVG可以表示为文档对象模型.</p></li> <li><p>可以将SVG属性指定为属性.</p></li> <li><p>SVG应该具有相对于原点(0,0)的绝对位置.</p></li> <li><p>SVG可以包含在HTML文档中.</p></li></ul> <p>让我们创建一个最小的SVG图像并将其包含在HTML文档中.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 创建一个SVG图像并将宽度设置为300像素，高度设置为300像素
svg 标签启动SVG图像，它具有宽度和高度作为属性. SVG格式的默认单位是像素. --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 创建一条从(100,100)开始到(200,100)结束的行，并为该行设置红色. --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>line</span> <span class="token attr-name">x1</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y1</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x2</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y2</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> 
   <span class="token attr-name">style</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>stroke:rgb(255,0,0);stroke-width:2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 行标记绘制一条线，其属性 x1，y1 指的是起始线点和 x2，y2 指的是结束点. style属性使用笔划和笔划宽度样式设置线条的颜色和粗细. --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="svg-using-d3-js"><a href="#svg-using-d3-js" aria-hidden="true" class="header-anchor">#</a> SVG Using D3.js</h3> <p>要使用D3.js创建SVG，请按照下面给出的步骤操作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建一个容器来保存SVG图像</span>
<span class="token comment">// 使用select（）方法选择SVG容器，并使用append（）方法注入SVG元素。 使用attr（）和style（）方法添加属性和样式。</span>
<span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#svgcontainer&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在svg元素中添加line元素，如下所示。</span>
svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;line&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x1&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y1&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x2&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> 
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y2&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;stroke&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rgb(255,0,0)&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;stroke-width&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="rectangle-element"><a href="#rectangle-element" aria-hidden="true" class="header-anchor">#</a> Rectangle Element</h3> <ul><li>矩形由<code>&lt;rect&gt;</code>标记表示，如下所示。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rect</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 矩形的属性如下:

x :这是矩形左上角的x坐标。

y: 这是矩形左上角的y坐标。

width: 这表示矩形的宽度。

height :这表示矩形的高度。 --&gt;</span>

</code></pre></div><ul><li>可以如下所述动态创建相同的矩形.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token comment">//Create SVG element</span>
         <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#svgcontainer&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//Create and append rectangle element</span>
         svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="circle-element"><a href="#circle-element" aria-hidden="true" class="header-anchor">#</a> Circle Element</h3> <p>圆圈由<code>&lt;circle&gt;</code>标签表示，如下所述.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- cx :这是圆心的x坐标。
cy : 这是圆心的y坐标。
r :这表示圆的半径。 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>使用SVG动态创建相同的圆圈.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token comment">//Create SVG element</span>
         <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#svgcontainer&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//Append circle </span>
         svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ellipse-element"><a href="#ellipse-element" aria-hidden="true" class="header-anchor">#</a> Ellipse Element</h3> <p>SVG Ellipse元素由<code>&lt;ellipse&gt;</code>标记表示，如下所述.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ellipse</span> <span class="token attr-name">cx</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- // 椭圆的属性如下:

// cx:这是椭圆中心的x坐标.

// cy:这是椭圆中心的y坐标.

// rx: 这是圆的x半径.

// ry:这是圆的y半径. --&gt;</span>
</code></pre></div><ul><li>使用d3进行svg绘制</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#svgcontainer&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
         svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;ellipse&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;rx&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;ry&quot;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="svg-转换"><a href="#svg-转换" aria-hidden="true" class="header-anchor">#</a> SVG 转换</h2> <p>SVG提供了转换单个SVG形状元素或SVG元素组的选项. SVG转换支持翻译，缩放，旋转和倾斜.让我们在本章中学习转换.</p> <h3 id="svg转换简介"><a href="#svg转换简介" aria-hidden="true" class="header-anchor">#</a> SVG转换简介</h3> <p>SVG引入了一个新属性转换来支持转型.可能的值是以下一项或多项:</p> <p>翻译 : 它需要两个选项， tx 指的是沿x轴的平移， ty 指的是沿y轴的平移.对于示例 : 翻译(30 30).</p> <p>旋转 : 它需要三个选项，角度指旋转角度， cx 和 cy 指的是x和y轴旋转的中心.如果未指定 cx 和 cy ，则默认为坐标系的当前原点.对于示例 : 旋转(60).</p> <p>比例 : 它有两个选项， sx 是指沿x轴的缩放因子， sy 是指沿y轴的缩放因子.这里， sy 是可选的，如果未指定，则它取 sx 的值.对于示例 :  scale(10).</p> <p>歪斜(SkewX和SkewY) : 它只需一个选项; 倾斜角是指SkewX沿x轴的角度和SkewY沿y轴的角度.对于示例 :  skewx(20).</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 
  带有translate的SVG矩形
可以使用空格作为分隔为单个SVG元素指定多个转换。 如果指定了多个值，则将按指定的顺序逐个应用转换。
转换也可以应用于SVG组元素。 这使得能够转换SVG中定义的复杂图形，如下所述。

要创建SVG图像，请尝试缩放，并使用变换旋转它
Step 1 : 创建SVG图像并将宽度设置为300像素，将高度设置为300像素。
Step 2: 创建一个SVG组。
Step 3:创建一个长度为60且高度为30的矩形，并用绿色填充它。
Step 4 :创建一个半径为30的圆，并用红色填充它。
Step 5 : 添加转换属性并添加平移和旋转，如下所示。 
--&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>svgcontainer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">transform</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>translate(60,60) rotate(30)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">y</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>60<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>60<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">fill</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rect</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">cy</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">r</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">fill</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="transformation-using-d3-js"><a href="#transformation-using-d3-js" aria-hidden="true" class="header-anchor">#</a> Transformation Using D3.js</h3> <p>要使用D3.js创建SVG，请按照下面给出的步骤操作。</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#svgcontainer&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> group <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(60, 60) rotate(30)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">var</span> rect <span class="token operator">=</span> group<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span>
            
            <span class="token keyword">var</span> circle <span class="token operator">=</span> group
               <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="转换库"><a href="#转换库" aria-hidden="true" class="header-anchor">#</a> 转换库</h3> <p>D3.js提供了一个单独的库来管理转换，而无需手动创建转换属性.它提供了处理所有类型转换的方法.一些方法是 transform()，translate()，scale()，rotate()等.您可以使用以下脚本在网页中包含 d3-transform .</p> <div class="language-html extra-class"><pre class="language-html"><code>&lt; script src =&quot;http://d3js.org/d3.v4.min.js&quot;&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script&amp;gt</span> <span class="token attr-name">;</span> 
<span class="token attr-name">&lt;</span> <span class="token attr-name">script</span> <span class="token attr-name">src</span> <span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>d3-transform.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在上面的例子中，转换代码可以写成如下所示 :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> my_transform <span class="token operator">=</span> <span class="token function">d3Transform</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> group <span class="token operator">=</span> svg
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> my_transform<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="d3-js-transition"><a href="#d3-js-transition" aria-hidden="true" class="header-anchor">#</a> D3.js - Transition</h2> <p>过渡是一个项目从一个状态转换到另一个状态的过程. D3.js提供了一个 transition()方法来在HTML页面中执行转换.让我们在本章中了解转换.</p> <h3 id="transition-方法"><a href="#transition-方法" aria-hidden="true" class="header-anchor">#</a> transition()方法</h3> <p>transition()方法适用于所有选择器，它启动过渡进程.此方法支持大多数选择方法，如-attr()，style()等.但是，它不支持append()和data()方法，这些方法需要在transition()方法之前调用.此外，它提供了特定于转换的方法，如duration()，ease()等.一个简单的转换可以定义如下 :</p> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;background-color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lightblue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以使用d3.transition()方法直接创建转换，然后与选择器一起使用，如下所示.</p> <div class="language-js extra-class"><pre class="language-js"><code> 
<span class="token keyword">var</span> t <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;background-color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lightblue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="d3-js-动画"><a href="#d3-js-动画" aria-hidden="true" class="header-anchor">#</a> D3.js - 动画</h2> <p>D3.js通过过渡支持动画.我们可以通过正确使用过渡来做动画.转换是关键帧动画的有限形式，只有两个关键帧 - 开始和结束.起始关键帧通常是DOM的当前状态，而结束关键帧是您指定的一组属性，样式和其他属性.转换非常适合转换到新视图，而不需要依赖于起始视图的复杂代码.</p> <h3 id="持续时间-方法"><a href="#持续时间-方法" aria-hidden="true" class="header-anchor">#</a> 持续时间()方法</h3> <p>duration()方法允许属性更改在指定的持续时间内平滑发生，而不是瞬间发生.让我们使用以下代码进行5秒的转换.</p> <div class="language-js extra-class"><pre class="language-js"><code> d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;h3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 此处，转换平稳且均匀.我们还可以使用以下方法直接指定RGB颜色代码值.</span>
 d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;h3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;rgb(0,150,120)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>现在，每个颜色编号从0到150缓慢，平滑且均匀地进行.要获得从起始帧值到中间帧的准确混合结束帧值，D3.js使用内部插值方法.语法在下面给出 :</p> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span>a，b<span class="token punctuation">)</span>
</code></pre></div><p>D3还支持以下插值类型 :</p> <ul><li><p>interpolateNumber : 支持数值.</p></li> <li><p>interpolateRgb : 支持颜色.</p></li> <li><p>interpolateString : 支持字符串.</p></li></ul> <p>D3.js负责使用正确的插值方法，在高级情况下，我们可以直接使用插值方法得到我们想要的结果.如果需要，我们甚至可以创建一个新的插值方法.</p> <h3 id="delay-方法"><a href="#delay-方法" aria-hidden="true" class="header-anchor">#</a> delay()方法</h3> <p>delay()方法允许进行转换过了一段时间.请考虑</p> <div class="language-js extra-class"><pre class="language-js"><code>  d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;h3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;font-size&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;28px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="转型生命周期"><a href="#转型生命周期" aria-hidden="true" class="header-anchor">#</a> 转型生命周期</h3> <p>转型有四个阶段的生命周期 :</p> <p>计划转换.</p> <p>转换开始.</p> <p>转换运行.</p> <p>过渡结束.</p> <p>让我们逐一详细讨论这些过程.</p> <ul><li><p>计划转换
转换在创建时计划.当我们调用 selection.transition 时，我们正在安排转换.这也是当我们调用 attr()，style()和其他过渡方法来定义结束关键帧时.</p></li> <li><p>过渡开始
转换从其延迟开始，延迟是在安排转换时指定的.如果未指定延迟，则转换将尽快开始，通常在几毫秒之后.</p></li> <li><p>如果转换有延迟，则应仅在启动时设置起始值过渡开始了.我们可以通过听取开始事件 : 去;</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>转换运行
当转换运行时，它会重复调用，其转换值范围为0到1.除延迟和持续时间外，转换还可以轻松控制时序.缓和会扭曲时间，例如慢进和慢进.某些缓动函数可能暂时给出大于1或小于0的值.</p></li> <li><p>转换结束
转换结束时间始终为1 ，以便在转换结束时准确设置结束值.转换基于其延迟和持续时间的总和而结束.转换结束时，将调度end事件.</p></li></ul> <h2 id="d3-js-绘制图表"><a href="#d3-js-绘制图表" aria-hidden="true" class="header-anchor">#</a> D3.js - 绘制图表</h2> <p>D3.js用于创建静态SVG图表。 它有助于绘制以下图表:</p> <p>Bar Chart (条形图)、Circle Chart、Pie Chart、Donut Chart、Line Chart、Bubble Chart, etc.</p> <h3 id="bar-chart"><a href="#bar-chart" aria-hidden="true" class="header-anchor">#</a> Bar Chart</h3> <p>条形图是最常用的图形类型之一，用于显示和比较不同离散类别或组的数量，频率或其他度量（例如平均值）。 该图以这样的方式构造，即不同条的高度或长度与它们所代表的类别的大小成比例。</p> <p>x轴（水平轴）表示没有比例的不同类别。 y轴（垂直轴）具有刻度，这表示测量单位。 可以垂直或水平绘制条，这取决于类别的数量和类别的长度或复杂性。</p> <h4 id="draw-a-bar-chart"><a href="#draw-a-bar-chart" aria-hidden="true" class="header-anchor">#</a> Draw a Bar Chart</h4> <p>让我们使用D3在SVG中创建条形图。 对于此示例，我们可以使用条形和文本元素的rect元素来显示与条形对应的数据值。</p> <p>要使用D3在SVG中创建条形图，请按照以下步骤操作。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 在rect元素中添加样式 */</span>
<span class="token selector">svg rect</span> <span class="token punctuation">{</span>
   <span class="token property">fill</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 在文本元素中添加样式 */</span>
<span class="token selector">svg text</span> <span class="token punctuation">{</span>
   <span class="token property">fill</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>
   <span class="token property">font</span><span class="token punctuation">:</span> 12px sans-serif<span class="token punctuation">;</span>
   <span class="token property">text-anchor</span><span class="token punctuation">:</span> end<span class="token punctuation">;</span> <span class="token comment">/* 文本锚用于将文本定位到条的右端 */</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在脚本中添加变量</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token comment">// SVG的宽度。</span>
      scaleFactor <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">// 缩放到屏幕上可见的像素值</span>
      barHeight <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// 这是水平条的静态高度</span>
 <span class="token comment">// 附加SVG元素</span>
 <span class="token comment">// 在这里，我们将首先选择文档正文，创建一个新的SVG元素然后追加它。 我们将在此SVG元素中构建条形图。 然后，设置SVG的宽度和高度。 高度计算为条形高度*数据值的数量。</span>
<span class="token keyword">var</span> graph <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> barHeight <span class="token operator">*</span> data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 我们创建组元素。 我们的每个组元素都需要一个位于另一个之下，以构建一个水平条形图</span>
<span class="token keyword">var</span> bar <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span> 
   <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;translate(0,&quot;</span> <span class="token operator">+</span> i <span class="token operator">*</span> barHeight <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将矩形元素追加到条形图</span>
bar<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> d <span class="token operator">*</span> scaleFactor<span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> barHeight <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在每个条上显示数据。</span>

bar<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span>d<span class="token operator">*</span>scaleFactor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> barHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;dy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.35em&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// 文本元素不支持填充或边距。 出于这个原因，我们需要给它一个&quot;dy&quot;偏移量</span>

</code></pre></div><ul><li>text-anchor 该文本与所给点的对齐方式 (开头、中间、末尾对齐) 。
<img src="data:image/png;base64,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" alt="这是条形图"></li></ul> <h3 id="circle-chart"><a href="#circle-chart" aria-hidden="true" class="header-anchor">#</a> Circle Chart</h3> <p>圆形图是圆形统计图形，它被分成切片以说明数字比例。</p> <p>Draw a Circle Chart</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span> <span class="token comment">// SVG的宽度</span>
<span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span> <span class="token comment">// SVG的高度</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 数据元素数组</span>
<span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'purple'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 将颜色应用于圆形元素</span>

<span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 创建组元素以保存圆圈</span>
   <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// 将我们的数据数组绑定到组元素</span>
   <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 为我们的组元素创建占位符</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 将组元素附加到我们的页面</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;translate(0,0)&quot;</span><span class="token punctuation">;</span> <span class="token comment">// translate用于相对于原点定位元素</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 附加圆形元素</span>
g<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
 <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> i<span class="token operator">*</span><span class="token number">75</span> <span class="token operator">+</span> <span class="token number">50</span><span class="token punctuation">;</span> <span class="token comment">// 我们使用每个圆的中心的x坐标</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token number">75</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> d<span class="token operator">*</span><span class="token number">1.5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> colors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> i <span class="token operator">*</span> <span class="token number">75</span> <span class="token operator">+</span> <span class="token number">25</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;stroke&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;teal&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-size&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;10px&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-family&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sans-serif&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> d<span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>### Pie Chart
饼图是圆形统计图。 它被分成片来显示数字比例。 让我们了解如何在<span class="token constant">D3</span>中创建饼图。

Draw a Pie Chart
在开始绘制饼图之前，我们需要了解以下两种方法<span class="token punctuation">:</span>

d3<span class="token punctuation">.</span>arc（）方法

d3<span class="token punctuation">.</span><span class="token function">pie</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法

让我们详细了解这两种方法。

d3<span class="token punctuation">.</span>arc（）方法<span class="token punctuation">:</span>d3<span class="token punctuation">.</span>arc（）方法生成一个弧。 您需要为弧设置内半径和外半径。 如果内半径为<span class="token number">0</span>，则结果将为饼图，否则结果将为圆环图，将在下一节中讨论。

d3<span class="token punctuation">.</span>pie（）方法<span class="token punctuation">:</span>d3<span class="token punctuation">.</span>pie（）方法用于生成饼图。 它从数据集中获取数据并计算饼图的每个楔形的起始角度和结束角度。

让我们使用以下步骤绘制饼图。

Step <span class="token number">1</span> <span class="token punctuation">:</span>应用样式<span class="token punctuation">:</span>让我们将以下样式应用于arc元素。

<span class="token punctuation">.</span>arc text <span class="token punctuation">{</span>
   font<span class="token punctuation">:</span> <span class="token number">12</span>px arial<span class="token punctuation">;</span>
   text<span class="token operator">-</span>anchor<span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>arc path <span class="token punctuation">{</span>
   stroke<span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>title <span class="token punctuation">{</span>
   fill<span class="token punctuation">:</span> green<span class="token punctuation">;</span>
   font<span class="token operator">-</span>weight<span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
这里，填充用于应用颜色。 文本锚用于将文本定位到弧的中心。

定义变量<span class="token punctuation">:</span>在脚本中定义变量，如下所示<span class="token punctuation">:</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
   <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      width <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      height <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      radius <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
Here<span class="token punctuation">,</span>

Width <span class="token punctuation">:</span> <span class="token constant">SVG</span>的宽度。

Height <span class="token punctuation">:</span><span class="token constant">SVG</span>的高度。

Radius<span class="token punctuation">:</span>它可以使用Math<span class="token punctuation">.</span>min（width，height）<span class="token operator">/</span> <span class="token number">2</span>的函数计算<span class="token punctuation">;</span>

Step <span class="token number">3</span><span class="token punctuation">:</span>应用转换<span class="token punctuation">:</span>使用以下代码在<span class="token constant">SVG</span>中应用以下转换。

<span class="token keyword">var</span> g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
现在使用d3<span class="token punctuation">.</span>scaleOrdinal函数添加颜色，如下所示。

<span class="token keyword">var</span> color <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleOrdinal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'gray'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'brown'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Step <span class="token number">4</span> <span class="token punctuation">:</span>生成饼图<span class="token punctuation">:</span>现在，使用下面给出的函数生成饼图。

<span class="token keyword">var</span> pie <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">pie</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">.</span>percent<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
在这里，您可以绘制百分比值。 返回d<span class="token punctuation">.</span>percent并将其设置为饼值需要匿名函数。

Step <span class="token number">5</span> <span class="token punctuation">:</span>Define arcs <span class="token keyword">for</span> pie wedges <span class="token punctuation">:</span>在生成饼图后，现在使用下面给出的函数为每个饼楔定义弧。

<span class="token keyword">var</span> arc <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
这里，该弧将被设置为路径元素。 计算出的半径设置为outerradius，而innerradius设置为<span class="token number">0</span>。

Step <span class="token number">6</span> <span class="token punctuation">:</span> Add labels <span class="token keyword">in</span> wedges <span class="token punctuation">:</span>通过提供半径来添加饼图中的标签。 它的定义如下。

<span class="token keyword">var</span> label <span class="token operator">=</span> d3
   <span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span>radius <span class="token operator">-</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Step <span class="token number">7</span> <span class="token punctuation">:</span>Read data<span class="token punctuation">:</span>这是重要的一步。 我们可以使用下面给出的函数读取数据。

d3<span class="token punctuation">.</span><span class="token function">csv</span><span class="token punctuation">(</span><span class="token string">&quot;populations.csv&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
population<span class="token punctuation">.</span>csv包含数据文件。 d3<span class="token punctuation">.</span>csv函数从数据集中读取数据。 如果数据不存在，则会引发错误。 我们可以在<span class="token constant">D3</span>路径中包含此文件。

下一步是使用以下代码加载数据。

<span class="token keyword">var</span> arc <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;.arc&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token function">pie</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
在这里，我们可以为数据集中的每个数据值的组元素分配数据。

Step <span class="token number">9</span><span class="token punctuation">:</span> Append path<span class="token punctuation">:</span> 现在，追加路径并将一个类<span class="token string">'arc'</span>分配给组，如下所示。

arcs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> arc<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">color</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>states<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
这里，fill用于应用数据颜色。 它取自d3<span class="token punctuation">.</span>scaleOrdinal函数。

Step <span class="token number">10</span> <span class="token punctuation">:</span> Append text <span class="token punctuation">:</span>使用以下代码在标签中显示文本。

arc<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      <span class="token keyword">return</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> label<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span> 
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>states<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    这里，<span class="token constant">SVG</span>文本元素用于在标签中显示文本。 我们之前使用d3<span class="token punctuation">.</span>arc（）创建的标签弧返回一个质心点，它是标签的位置。 最后，我们使用d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>browser提供数据。

Step <span class="token number">11</span><span class="token punctuation">:</span>Append group elements<span class="token punctuation">:</span>附加组元素属性并添加类标题以使文本着色并使其变为斜体，这在步骤<span class="token number">1</span>中指定并在下面定义。

svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">120</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> <span class="token number">20</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;Top population states in india&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span>
Step <span class="token number">12</span> <span class="token punctuation">:</span>工作示例<span class="token punctuation">:</span>要绘制饼图，我们可以获取印度人口的数据集。 此数据集显示虚拟网站中的人口，其定义如下。

population<span class="token punctuation">.</span>csv

states<span class="token punctuation">,</span>percent
<span class="token constant">UP</span><span class="token punctuation">,</span><span class="token number">80.00</span>
Maharastra<span class="token punctuation">,</span><span class="token number">70.00</span>
Bihar<span class="token punctuation">,</span><span class="token number">65.0</span>
<span class="token constant">MP</span><span class="token punctuation">,</span><span class="token number">60.00</span>
Gujarat<span class="token punctuation">,</span><span class="token number">50.0</span>
<span class="token constant">WB</span><span class="token punctuation">,</span><span class="token number">49.0</span>
<span class="token constant">TN</span><span class="token punctuation">,</span><span class="token number">35.0</span>
让我们为上面的数据集创建一个饼图可视化。 创建一个网页<span class="token string">&quot;piechart.html&quot;</span>并在其中添加以下代码。

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
         <span class="token punctuation">.</span>arc text <span class="token punctuation">{</span>
            font<span class="token punctuation">:</span> <span class="token number">12</span>px arial<span class="token punctuation">;</span>
            text<span class="token operator">-</span>anchor<span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         
         <span class="token punctuation">.</span>arc path <span class="token punctuation">{</span>
            stroke<span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
        
        <span class="token punctuation">.</span>title <span class="token punctuation">{</span>
            fill<span class="token punctuation">:</span> green<span class="token punctuation">;</span>
            font<span class="token operator">-</span>weight<span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
      
      <span class="token operator">&lt;</span>script type <span class="token operator">=</span> <span class="token string">&quot;text/javascript&quot;</span> src <span class="token operator">=</span> <span class="token string">&quot;https://d3js.org/d3.v4.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>

   <span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>svg width <span class="token operator">=</span> <span class="token string">&quot;400&quot;</span> height <span class="token operator">=</span> <span class="token string">&quot;400&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>svg<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
         <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            width <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            height <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            radius <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        
         <span class="token keyword">var</span> g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token keyword">var</span> color <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleOrdinal</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string">'gray'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'brown'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'purple'</span>
         <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
         <span class="token keyword">var</span> pie <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">pie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> d<span class="token punctuation">.</span>percent<span class="token punctuation">;</span> 
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
         <span class="token keyword">var</span> path <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>radius <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
         <span class="token keyword">var</span> label <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span>radius <span class="token operator">-</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
         d3<span class="token punctuation">.</span><span class="token function">csv</span><span class="token punctuation">(</span><span class="token string">&quot;populations.csv&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token keyword">var</span> arc <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;.arc&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token function">pie</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            arc<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">color</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>states<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arc<span class="token punctuation">)</span>
        
            arc<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
               <span class="token keyword">return</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> label<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            
            <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>states<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
         svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">120</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> <span class="token number">20</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;Top population states in india&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
piechart


 
Donut Chart
Donut or Doughnut chart 只是一个内部有洞的简单饼图。 我们可以将孔半径定义为您需要的任何尺寸，包括百分比或像素。 我们可以创建圆环图而不是饼图。 更改弧的内半径以使用大于零的值。 它的定义如下。

<span class="token keyword">var</span> arc <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
与饼图编码相同，内半径略有变化，我们可以生成圆环图。 创建一个网页dounutchart<span class="token punctuation">.</span>html并在其中添加以下更改。

Donutchart<span class="token punctuation">.</span>html
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
         <span class="token punctuation">.</span>arc text <span class="token punctuation">{</span>
            font<span class="token punctuation">:</span> <span class="token number">12</span>px arial<span class="token punctuation">;</span>
            text<span class="token operator">-</span>anchor<span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
        
         <span class="token punctuation">.</span>arc path <span class="token punctuation">{</span>
            stroke<span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
        
         <span class="token punctuation">.</span>title <span class="token punctuation">{</span>
            fill<span class="token punctuation">:</span> green<span class="token punctuation">;</span>
            font<span class="token operator">-</span>weight<span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>script type <span class="token operator">=</span> <span class="token string">&quot;text/javascript&quot;</span> src <span class="token operator">=</span> <span class="token string">&quot;https://d3js.org/d3.v4.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>

   <span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>svg width <span class="token operator">=</span> <span class="token string">&quot;400&quot;</span> height <span class="token operator">=</span> <span class="token string">&quot;400&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>svg<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
         <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            width <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            height <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            radius <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        
         <span class="token keyword">var</span> g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
         <span class="token keyword">var</span> color <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleOrdinal</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string">'gray'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'brown'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'purple'</span>
         <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
         <span class="token keyword">var</span> pie <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">pie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> d<span class="token punctuation">.</span>percent<span class="token punctuation">;</span> 
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
         <span class="token keyword">var</span> path <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
         <span class="token keyword">var</span> label <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span>radius <span class="token operator">-</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
         d3<span class="token punctuation">.</span><span class="token function">csv</span><span class="token punctuation">(</span><span class="token string">&quot;populations.csv&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token keyword">var</span> arc <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;.arc&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token function">pie</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               arc<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
                  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
                  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">color</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>states<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           
               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arc<span class="token punctuation">)</span>
           
               arc<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
                  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                     <span class="token keyword">return</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> label<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span> 
                   <span class="token punctuation">}</span><span class="token punctuation">)</span>
                  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>states<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
         svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">120</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> <span class="token number">20</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
在这里，我们将路径变量更改为<span class="token punctuation">:</span>

<span class="token keyword">var</span> path <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
我们将innerRadius值设置为<span class="token operator">&gt;</span> <span class="token number">0</span>以生成圆环图。 现在，请求浏览器，我们可以看到以下响应。

Donut Chart

</code></pre></div><blockquote><p>参考 http://www.it1352.com/OnLineTutorial/d3js/</p></blockquote></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/knowledge/assets/js/app.5a0872b2.js" defer></script><script src="/knowledge/assets/js/15.74572eea.js" defer></script>
  </body>
</html>
